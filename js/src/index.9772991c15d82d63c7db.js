/*! For license information please see index.9772991c15d82d63c7db.js.LICENSE.txt */
"use strict";(self.webpackChunktheremin=self.webpackChunktheremin||[]).push([[927],{5418:(t,e,n)=>{n.d(e,{A:()=>F,B:()=>j,C:()=>N,D:()=>L,E:()=>D,F:()=>U,G:()=>$,H:()=>z,I:()=>H,J:()=>W,K:()=>G,L:()=>J,M:()=>X,N:()=>K,O:()=>Q,P:()=>C,Q:()=>tt,a:()=>l,b:()=>u,c:()=>h,d:()=>f,e:()=>d,f:()=>g,g:()=>p,h:()=>m,i:()=>y,j:()=>w,k:()=>v,l:()=>b,m:()=>x,n:()=>E,o:()=>A,p:()=>M,q:()=>S,r:()=>I,s:()=>s,t:()=>T,u:()=>_,v:()=>O,w:()=>k,x:()=>R,y:()=>B,z:()=>P}),n(5389),n(3807),n(7760);var r=n(198),i=n(3077),o=n(5280);function s(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}function a(t){return(e,n,o,s,a)=>{const l=(0,r.ae)(e,n),u=l.length,h=(0,i.P)(l),c=(0,i.s)(l),f=(0,i.D)(a,c),d=e.length,g=n.length,p=(0,i.P)(e),m=(0,i.P)(n),y=(0,r.bV)(e,l),w=(0,r.bV)(n,l);if(y.length+w.length===0)for(let e=0;e<f.length;++e)f[e]=t(o[e%o.length],s[e%s.length]);else for(let e=0;e<f.length;++e){const n=(0,i.U)(e,u,h),r=n.slice(-d);y.forEach((t=>r[t]=0));const a=(0,i.T)(r,d,p),l=n.slice(-g);w.forEach((t=>l[t]=0));const c=(0,i.T)(l,g,m);f[e]=t(o[a],s[c])}return[f,l]}}const l=a(((t,e)=>t+e));function u(t,e,n,r,o){const s=(0,i.s)(r),a=(0,i.Q)(o,n);for(let n=0;n<t.length;n++){const r=t[n];if(r<0)throw new Error("Input x must be non-negative!");r>=o||(a[r]+=s>0?e[n]:1)}return a}function h(t,e,n,i=!1){const o=t.shape[0],s=t.shape[1],a=(0,r.n)([o,n],e.dtype);for(let r=0;r<o;r++)for(let o=0;o<s;o++){const s=t.get(r,o);if(s<0)throw new Error("Input x must be non-negative!");s>=n||(i?a.set(1,r,s):e.size>0?a.set(a.get(r,s)+e.get(r,o),r,s):a.set(a.get(r,s)+1,r,s))}return a}function c(t){return(e,n,r)=>{const o=(0,i.D)(n,e.length);for(let n=0;n<e.length;++n)o[n]=t(e[n],r);return o}}const f=c((t=>Math.ceil(t)));function d(t,e,n,r){const s=(0,i.E)(n,(0,i.s)(e));if(r&&"string"!==n){let e=0;t.forEach((t=>{const n=(0,i.s)(t.shape);s.set(t.vals,e),e+=n}))}else{let r=0;t.forEach((t=>{const i="string"===n?(0,o.f)(t.vals):t.vals;let a=0;for(let n=0;n<t.shape[0];++n){const o=n*e[1]+r;for(let e=0;e<t.shape[1];++e)s[o+e]=i[a++]}r+=t.shape[1]}))}return s}const g=a(((t,e)=>t===e?1:0)),p=c((t=>Math.exp(t))),m=c((t=>Math.expm1(t))),y=c((t=>Math.floor(t)));function w(t,e,n,i,o,s,a,l,u){const h=(0,r.n)([i,s],n);for(let n=0;n<i;n++){const r=[];let i=0;for(let e=0;e<o;e++){const s=t[n*o+e];i+=s*a[e],r.push(s)}if(i<0||i>=u/s)throw new Error(`Invalid indices: ${r} does not index into ${l}`);for(let t=0;t<s;t++)h.values[n*s+t]=e.get(...e.indexToLoc(i*s+t))}return h}function v(t,e,n){const i=(0,r.n)(n,t.dtype);for(let n=0;n<i.size;++n){const r=i.indexToLoc(n).slice(),o=r[0],s=r[2],a=e.locToIndex([o,s]);r[2]=e.values[a];const l=t.locToIndex(r);0<=l&&l<t.values.length&&(i.values[n]=t.values[l])}return i}const b=a(((t,e)=>t>e?1:0)),x=a(((t,e)=>t>=e?1:0)),E=a(((t,e)=>t<e?1:0)),A=a(((t,e)=>t<=e?1:0));function M(t,e,n){const r=(e-t)/(n-1),o=(0,i.Q)(n,"float32");o[0]=t;for(let t=1;t<o.length;t++)o[t]=o[t-1]+r;return o}const S=c((t=>Math.log(t)));function I(t,e,n,r){const o=(0,i.D)(r,(0,i.s)(n));for(let n=0;n<o.length;++n){const r=n*e;let i=t[r];for(let n=0;n<e;++n){const e=t[r+n];(Number.isNaN(e)||e>i)&&(i=e)}o[n]=i}return o}const T=a(((t,e)=>Math.max(t,e))),_=a(((t,e)=>Math.min(t,e))),O=a(((t,e)=>t*e));function k(t,e,n){const i=(0,r.bW)(-1,n);return O([],e,i,t,n)}const R=a(((t,e)=>t!==e?1:0));function C(t,e,n,r,o){const s=e.length,a=(0,i.s)(e),l=(0,i.P)(e),u=(0,i.P)(o),h=(0,i.D)(n,(0,i.s)(o));for(let e=0;e<a;++e){const n=(0,i.U)(e,s,l),o=new Array(n.length);for(let t=0;t<o.length;t++)o[t]=n[r[t]];h[(0,i.T)(o,s,u)]=t[e]}return h}function B(t,e,n,o){const[s,a]=(0,r.bX)(t,o),l=(0,r.bY)(e,"int32"),u=(0,i.Q)((0,i.s)(s),l),h=(0,i.s)(a);for(let t=0;t<u.length;++t){const e=t*h;let r=1;for(let t=0;t<h;++t)r*=n[e+t];u[t]=r}return{outVals:u,outShape:s,outDtype:l}}function P(t,e,n,r){if(t===e||t<e&&n<0||e<t&&n>1)return(0,i.Q)(0,r);const o=Math.abs(Math.ceil((e-t)/n)),s=(0,i.Q)(o,r);e<t&&1===n&&(n=-1),s[0]=t;for(let t=1;t<s.length;t++)s[t]=s[t-1]+n;return s}const F=c((t=>1/Math.sqrt(t))),j=c((t=>1/(1+Math.exp(-t))));function N(t,e,n,s,a){const l=(0,o.i)(s,e,n),u=(0,i.s)(n),h=(0,i.P)(s);if(l){const n=(0,o.c)(e,h);return"string"===a?t.slice(n,n+u):t.subarray(n,n+u)}const c="string"===a?(0,o.f)(t):t,f=(0,r.n)(s,a,c),d=(0,r.n)(n,a);for(let t=0;t<d.size;++t){const n=d.indexToLoc(t),r=n.map(((t,n)=>t+e[n]));d.set(f.get(...r),...n)}return"string"===a?(0,o.a)(d.values):d.values}function L(t,e,n,r,s,a,l){const u=e[0],h=a[0],c=new Array(h),f=new Array(u),d=e[1];if(0===h){if(0!==u)throw new Error((0,o.g)(u));return[(0,i.E)(n,0),[0,d],(0,i.E)(s,0),c,f]}let g=!0,p=0;const m=new Array(h).fill(0);for(let e=0;e<u;++e){const n=t[e*d];if(n<0)throw new Error((0,o.b)(e,n));if(n>=h)throw new Error((0,o.d)(e,n,h));++m[n],g=g&&n>=p,p=n}let y=!0;for(let t=0;t<h;++t){const e=0===m[t];c[t]=e,y=y&&!e,m[t]=Math.max(m[t],1),t>0&&(m[t]+=m[t-1])}if(y&&g){const e=t,n=r;for(let t=0;t<u;++t)f[t]=t;return[e,[u,d],n,c,f]}{const e=m[h-1],o=(0,i.E)(n,e*d),a=(0,i.E)(s,e),g=new Array(h).fill(0);for(let e=0;e<u;++e){const n=t[e*d],i=g[n],s=(0===n?0:m[n-1])+i;g[n]++;for(let n=0;n<d;++n)o[s*d+n]=t[e*d+n];a[s]=r[e],f[e]=s}for(let t=0;t<h;++t)if(0===g[t]){const e=0===t?0:m[t-1];o[e*d+0]=t;for(let t=1;t<d;++t)o[e*d+t]=0;a[e]=l}return[o,[e,d],a,c,f]}}function D(t,e,n,r,s){const a=(0,i.s)(r),l=e[0],u=s.length,h=[];let c=1,f=-1;for(let t=0;t<u;++t){const e=s[t];if(-1===e){if(-1!==f)throw new Error((0,o.e)(f,t));f=t,h.push(1)}else{if(e<0)throw new Error((0,o.h)(t,e));c*=e,h.push(e)}}if(-1!==f){if(c<=0)throw new Error((0,o.j)());const t=Math.trunc(a/c);if(c*t!==a)throw new Error((0,o.k)(r,h));h[f]=t}if((0,i.s)(h)!==a)throw new Error((0,o.l)(r,h));const d=r.length,g=[];if(d>0){g[d-1]=1;for(let t=d-2;t>=0;--t)g[t]=g[t+1]*r[t+1]}const p=[];if(u>0){p[u-1]=1;for(let t=u-2;t>=0;--t)p[t]=p[t+1]*h[t+1]}const m=(0,i.E)(n,l*u);for(let e=0;e<l;++e){let n=0;for(let r=0;r<d;++r)n+=t[e*d+r]*g[r];for(let t=0;t<u;++t)m[e*u+t]=Math.trunc(n/p[t]),n%=p[t]}return[m,[l,u],h]}function U(t,e,n,r,s,a=!1,l=0){const u=r.length,h=[e[0],t.length/e[0]],c=h[1],f=u>0?s[u-1]+1:0;if(f<0)throw new Error((0,o.m)());const d=e.slice();d[0]=f;const g=d.reduce(((t,e)=>t*e),1),p=(0,i.E)(n,g);if(0===u)return f>0&&p.fill(l),[p,d];if(f<=0)throw new Error((0,o.m)());let m=0,y=1,w=0,v=s[m];for(;;){let e=0;if(y<u){if(e=s[y],v===e){++y;continue}if(v>=e)throw new Error((0,o.n)())}if(v<0||v>=f)throw new Error((0,o.o)(v,f));v>w&&p.fill(l,w*c,v*c);for(let e=m;e<y;++e){const n=r[e];if(n<0||n>=h[0])throw new Error((0,o.p)(e,r[e],h[0]));for(let e=0;e<c;e++)p[v*c+e]+=t[n*c+e]}if(a)for(let t=0;t<c;t++)p[v*c+t]/=y-m;if(m=y,++y,w=v+1,v=e,y>u)break}return w<f&&p.fill(l,w*c,f*c),[p,d]}const $=c((t=>Math.sqrt(t))),z=a(((t,e)=>{const n=t-e;return n*n}));function H(t,e,n,i){const o=(0,r.n)(t,e.dtype);for(let t=0;t<o.size;t++){const r=o.indexToLoc(t),s=new Array(r.length);for(let t=0;t<s.length;t++)s[t]=r[t]*n[t]+i[t];o.set(e.get(...s),...r)}return o}class q{constructor(t,e,n,i,o,s){this.separator=(0,r.bZ)(t),this.nGramWidths=e,this.leftPad=(0,r.bZ)(n),this.rightPad=(0,r.bZ)(i),this.padWidth=o,this.preserveShort=s}getPadWidth(t){return Math.min(this.padWidth<0?t-1:this.padWidth,t-1)}getNumNGrams(t,e){const n=this.getPadWidth(e);return Math.max(0,t+2*n-e+1)}createNGrams(t,e,n,r,i,o){for(let s=0;s<i;++s){const a=this.getPadWidth(o),l=Math.max(0,a-s),u=Math.max(0,a-(i-(s+1))),h=o-(l+u),c=e+(l>0?0:s-a);let f=0;f+=l*this.leftPad.length;for(let e=0;e<h;++e)f+=t[c+e].length;f+=u*this.rightPad.length,f+=(l+u+h-1)*this.separator.length,n[r+s]=new Uint8Array(f);const d=n[r+s];let g=0;const p=t=>t.forEach((t=>d[g++]=t));for(let t=0;t<l;++t)p(this.leftPad),p(this.separator);for(let e=0;e<h-1;++e)p(t[c+e]),p(this.separator);if(h>0){p(t[c+h-1]);for(let t=0;t<u;++t)p(this.separator),p(this.rightPad)}else{for(let t=0;t<u-1;++t)p(this.rightPad),p(this.separator);p(this.rightPad)}}}compute(t,e){const n=t.length,r=e.length;if(r>0){let t=e[0];if(0!==t)throw new Error(`First split value must be 0, got ${t}`);for(let i=1;i<r;++i){let r=e[i]>=t;if(r=r&&e[i]<=n,!r)throw new Error(`Invalid split value ${e[i]}, must be in [${t}, ${n}]`);t=e[i]}if(t!==n)throw new Error(`Last split value must be data size. Expected ${n}, got ${t}`)}const o=r-1,s=(0,i.E)("int32",r);if(0===n||0===r){const t=new Array(n);for(let t=0;t<=o;++t)s[t]=0;return[t,s]}s[0]=0;for(let t=1;t<=o;++t){const n=e[t]-e[t-1];let r=0;this.nGramWidths.forEach((t=>{r+=this.getNumNGrams(n,t)})),this.preserveShort&&n>0&&0===r&&(r=1),s[t]=s[t-1]+r}const a=new Array(s[o]);for(let n=0;n<o;++n){const r=e[n];let i=s[n];if(this.nGramWidths.forEach((o=>{const s=e[n+1]-e[n],l=this.getNumNGrams(s,o);this.createNGrams(t,r,a,i,l,o),i+=l})),this.preserveShort&&i===s[n]){const o=e[n+1]-e[n];if(0===o)continue;const s=o+2*this.padWidth,l=1;this.createNGrams(t,r,a,i,l,s)}}return[a,s]}}function W(t,e,n,r,i,o,s,a){return new q(n,r,i,o,s,a).compute(t,e)}function V(t,e,n,r){if(!t.length)return;if(0===e.length){for(let e=0;e<t.length;++e)r.push(t.subarray(e,e+1));return}if(1===e.length){const i=e[0];let o=t.indexOf(i);for(;-1!==o;){const e=t.subarray(0,o);n&&0===e.length||r.push(e),o=(t=t.subarray(o+1)).indexOf(i)}return void(n&&0===t.length||r.push(t))}let i=0;for(let o=0;o<t.length+1;o++)if(o===t.length||-1!==e.indexOf(t[o])){const e=t.subarray(i,o);n&&0===e.length||r.push(e),i=o+1}}function G(t,e,n){const r=t.length,o=[];let s=0,a=0;const l=new Array(r);for(let i=0;i<r;++i){const r=o.length;V(t[i],e,n,o);const u=o.length-r;l[i]=u,s+=u,a=Math.max(a,u)}const u=(0,i.E)("int32",2*s),h=new Array(s),c=[r,a];let f=0;for(let t=0;t<r;++t)for(let e=0;e<l[t];++e)u[2*f]=t,u[2*f+1]=e,h[f]=o[f],++f;return[u,h,c]}function J(t,e){const n=(0,i.E)("int32",t.length);for(let i=0;i<t.length;++i)n[i]=(0,r.b_)(t[i]).modulo(e).getLowBitsUnsigned();return n}const X=a(((t,e)=>t-e));function K(t,e){const n=new Array(t.rank);for(let r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];const i=(0,r.n)(n,t.dtype);for(let e=0;e<i.values.length;++e){const n=i.indexToLoc(e),r=new Array(t.rank);for(let e=0;e<r.length;e++)r[e]=n[e]%t.shape[e];const o=t.locToIndex(r);i.values[e]=t.values[o]}return i}const Y=(t,e)=>{const n=e.value-t.value;return 0===n?t.index-e.index:n};function Z(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const i=r-n+1,o=e-n+1,s=Math.log(i),a=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*a*(i-a)/i)*Math.sign(o-i/2);Z(t,e,Math.max(n,Math.floor(e-o*a/i+l)),Math.min(r,Math.floor(e+(i-o)*a/i+l)))}const o=t[e];let s=n,a=r;for((0,i.q)(t,n,e),Y(t[r],o)>0&&(0,i.q)(t,n,r);s<a;){for((0,i.q)(t,s,a),s++,a--;Y(t[s],o)<0;)s+=1;for(;Y(t[a],o)>0;)a-=1}0===Y(t[n],o)?(0,i.q)(t,n,a):(a+=1,(0,i.q)(t,a,r)),a<=e&&(n=a+1),e<=a&&(r=a-1)}}function Q(t,e,n,o,s){const a=e[e.length-1],[l,u]=[t.length/a,a],h=(0,i.D)(n,l*o),c=(0,i.D)("int32",l*o);for(let e=0;e<l;e++){const n=e*u,r=t.subarray(n,n+u);let i=new Array(r.length);r.forEach(((t,e)=>i[e]={value:t,index:e})),o<i.length&&(Z(i,o),i=i.slice(0,o)),s&&i.sort(Y);const a=e*o,l=h.subarray(a,a+o),f=c.subarray(a,a+o);for(let t=0;t<o;t++)l[t]=i[t].value,f[t]=i[t].index}const f=e.slice();return f[f.length-1]=o,[(0,r.n)(f,n,h),(0,r.n)(f,"int32",c)]}function tt(t,e,n,o){const s=(0,i.p)(e,n)[0],a=[1,n[0],1];for(let t=0;t<s;t++)a[0]*=n[t];a[1]=n[s];for(let t=s+1;t<n.length;t++)a[2]*=n[t];const l={},u=new Int32Array(n[s]),h=new r.b4(a,o,t),c=[],f=1===a[0]&&1===a[2];for(let e=0;e<n[s];e++){let n;if(f)n=t[e].toString();else{const t=[];for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)t.push(h.get(n,e,r));n=t.join(",")}if(void 0!==l[n])u[e]=l[n];else{const t=Object.keys(l).length;l[n]=t,u[e]=t,c.push(e)}}const d=a.slice();d[1]=Object.keys(l).length;const g=new r.b4(d,o);c.forEach(((t,e)=>{for(let n=0;n<a[0];n++)for(let r=0;r<a[2];r++)g.set(h.get(n,t,r),n,e,r)}));const p=n.slice();return p[s]=d[1],{outputValues:g.values,outputShape:p,indices:u}}},586:(t,e,n)=>{n.d(e,{a:()=>i,c:()=>r,g:()=>o});var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function i(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function o(t){return t&&Object.prototype.hasOwnProperty.call(t,"default")&&1===Object.keys(t).length?t.default:t}},5280:(t,e,n)=>{n.d(e,{A:()=>A,B:()=>E,C:()=>$,D:()=>H,E:()=>q,F:()=>z,G:()=>W,H:()=>B,I:()=>P,J:()=>F,K:()=>j,L:()=>N,M:()=>L,N:()=>o,O:()=>lt,P:()=>S,Q:()=>C,R:()=>G,S:()=>R,T:()=>v,U:()=>a,V:()=>at,W:()=>st,a:()=>ct,b:()=>X,c:()=>y,d:()=>K,e:()=>Y,f:()=>ht,g:()=>J,h:()=>Z,i:()=>m,j:()=>Q,k:()=>tt,l:()=>et,m:()=>nt,n:()=>rt,o:()=>it,p:()=>ot,q:()=>ft,r:()=>D,s:()=>M,t:()=>w,u:()=>s,v:()=>I,w:()=>T,x:()=>_,y:()=>O,z:()=>k}),n(5389),n(3807);var r=n(198),i=n(3077);function o(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if("int32"!==e.dtype)throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(0===(0,i.s)(t.shape))throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const o=e.shape,s=o[o.length-1];let a=1;for(let t=0;t<o.length-1;++t)a*=o[t];const l=t.shape,u=o.slice();u.pop();let h=1;for(let t=s;t<n;++t)h*=l[t],u.push(l[t]);const c=[...(0,i.P)(t.shape).map((t=>t/h)),1].slice(0,s);return[u,a,h,c]}function s(t,e,n){const r=t.shape.length;(0,i.a)(r===e.length,(()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`)),(0,i.a)(r===n.length,(()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`));for(let o=0;o<r;++o)(0,i.a)(e[o]+n[o]<=t.shape[o],(()=>`Error in slice${r}D: begin[${o}] + size[${o}] (${e[o]+n[o]}) would overflow input.shape[${o}] (${t.shape[o]})`))}function a(t,e,n){const r=[];for(let i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function l(t,e,n,r){const i=[...t];for(let t=i.length;t<r.length;t++)i.push(1);for(let t=0;t<n;t++)0===t?i[e]=1:(i.splice(e,0,1),i.pop());return i}function u(t,e,n){return n<=t?n:n-(e-1)}function h(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function c(t,e,n,r,i){const o=[...i],s=h(n,e);for(let i=0;i<o.length;i++)if(s.indexOf(i)>-1)o[i]=0;else{const s=u(e,n,i);let a=r[s];t&1<<s&&(a=0),o[i]=a}return o}function f(t,e,n,r,o){const s=[...o],a=h(n,e);for(let i=0;i<s.length;i++)if(a.indexOf(i)>-1)s[i]=Number.MAX_SAFE_INTEGER;else{const o=u(e,n,i);let a=r[o];t&1<<o&&(a=Number.MAX_SAFE_INTEGER),s[i]=a}for(let t=0;t<s.length;t++){const e=o[t];s[t]<0&&(s[t]+=e),s[t]=(0,i.n)(0,s[t],o[t])}return s}function d(t,e,n){let r=t[e];return(n&1<<e||null==r)&&(r=1),r}function g(t,e,n,r,o,s){let a=e[o];const l=n[o]||1;(t&1<<o||s&1<<o||null==a)&&(a=l>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);const u=r[o];return a<0&&(a+=u),a=(0,i.n)(0,a,u-1),a}function p(t,e,n,r,o,s){let a=e[o];const l=n[o]||1;(t&1<<o||s&1<<o||null==a)&&(a=l>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);const u=r[o];return a<0&&(a+=u),a=l>0?(0,i.n)(0,a,u):(0,i.n)(-1,a,u-1),a}function m(t,e,n){let r=n.length;for(let t=0;t<n.length;t++)if(n[t]>1){r=t;break}for(let i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function y(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function w(t,e,n){let r;const o=t.shape.length;let s;return r="number"==typeof e?[e,...new Array(o-1).fill(0)]:e.length<o?e.concat(new Array(o-e.length).fill(0)):e.slice(),r.forEach((t=>{(0,i.a)(-1!==t,(()=>"slice() does not support negative begin indexing."))})),s=null==n?new Array(o).fill(-1):"number"==typeof n?[n,...new Array(o-1).fill(-1)]:n.length<o?n.concat(new Array(o-n.length).fill(-1)):n,s=s.map(((e,n)=>e>=0?e:((0,i.a)(-1===e,(()=>`Negative size values should be exactly -1 but got ${e} for the slice() size at index ${n}.`)),t.shape[n]-r[n]))),[r,s]}function v(t,e,n,r,i,o,s,a,l){let u;if(null==r?(u=new Array(e.length),u.fill(1)):u=r,null!=s&&0!=(s&s-1))throw new Error("Multiple ellipses in slice is not allowed.");let h=!1;const c={dims:u.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:u.slice(),beginMask:i,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:l};for(let t=0;t<c.dims;t++)h&&0!=(1<<t&a)&&c.numAddAxisAfterEllipsis++,1<<t&s&&(h=!0);h||(c.ellipsisMask|=1<<c.dims,c.dims++);const f={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};!function(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=null!=t.begin,e.endValid=null!=t.end,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const i=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<i;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(-2),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);null!=t.begin&&(e.begin[n]=t.begin[r]),null!=t.end&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(-1),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}(c,f);let d=!0,g=!0,p=!0;const m=[],y=[];for(let e=0;e<t.length;++e){if(0===f.strides[e])throw Error(`strides[${e}] must be non-zero`);const n=!!(f.shrinkAxisMask&1<<e),r=t[e];if(-1===r){m.push(n?1:-1);continue}const i=[f.beginMask&1<<e,f.endMask&1<<e],o=[f.strides[e]>0?0:-1,f.strides[e]>0?r:r-1];if(n&&f.strides[e]<=0)throw Error("only stride 1 allowed on non-range indexing.");p=p&&1===f.strides[e];const s=!!(f.beginMask&1<<e&&f.endMask&1<<e);if(f.beginValid&&f.endValid){if(n){const t=f.begin[e]<0?r+f.begin[e]:f.begin[e];if(f.begin[e]=t,f.end[e]=f.begin[e]+1,t<0||t>=r)throw Error(`slice index ${f.begin[e]} of dimension ${e} out of bounds.`)}else f.begin[e]=b(f.begin[e],0,f.strides[e],r,i,o),f.end[e]=b(f.end[e],1,f.strides[e],r,i,o);const t=1===f.strides[e]&&0===f.begin[e]&&f.end[e]===r;d=d&&t,g=g&&(0===e&&1===f.strides[e]||t)}else d=d&&1===f.strides[e]&&s,g=g&&(0===e&&1===f.strides[e]||s);let a,l=!1;if(f.beginValid&&f.endValid?(a=f.end[e]-f.begin[e],l=!0):n?(a=1,l=!0):s&&r>=0&&(a=f.strides[e]<0?-r:r,l=!0),l){let t;t=0===a||a<0!=f.strides[e]<0?0:Math.trunc(a/f.strides[e])+(a%f.strides[e]!=0?1:0),m.push(t)}else m.push(-1)}for(let t=0;t<f.finalShapeGatherIndices.length;++t){const e=f.finalShapeGatherIndices[t];e>=0?y.push(m[e]):-2===e&&y.push(1)}return{finalShapeSparse:y.filter(((t,e)=>-2!==f.finalShapeGatherIndices[e])),finalShape:y,isIdentity:d,sliceDim0:g,isSimpleSlice:p,begin:f.begin,end:f.end,strides:f.strides}}function b(t,e,n,r,i,o){if(i[e])return n>0?o[e]:o[e+1&1];{const e=t<0?r+t:t;return e<o[0]?o[0]:e>o[1]?o[1]:e}}var x=Object.freeze({__proto__:null,assertParamsValid:s,maskToAxes:function(t){const e=[];let n=0;for(;t>0;)1&t&&e.push(n),t/=2,n++;return e},computeOutShape:a,stridesWithElidedDims:l,getNormalizedAxes:function(t,e,n,r,i,o,s,a,u){const h=t.length;let m=new Array(h),y=new Array(h),w=new Array(h);if(e.length&&n>0){const u=e[0],h=n+1;m=c(s,u,h,r,t),y=f(a,u,h,i,t),w=l(o,u,h,t)}else for(let e=0;e<h;e++)m[e]=g(s,r,o,t,e,u),y[e]=p(a,i,o,t,e,u),w[e]=d(o,e,u);return{begin:m,end:y,strides:w}},startIndicesWithElidedDims:c,stopIndicesWithElidedDims:f,stridesForAxis:d,startForAxis:g,stopForAxis:p,isSliceContinous:m,computeFlatOffset:y,parseSliceParams:w,sliceInfo:v});function E(t,e){const n=t[0].length;t.forEach(((t,e)=>{(0,i.a)(t.length===n,(()=>`Error in concat${n}D: rank of tensors[${e}] must be the same as the rank of the rest (${n})`))})),(0,i.a)(e>=0&&e<n,(()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`));const r=t[0];t.forEach(((t,o)=>{for(let s=0;s<n;s++)(0,i.a)(s===e||t[s]===r[s],(()=>`Error in concat${n}D: Shape of tensors[${o}] (${t}) does not match the shape of the rest (${r}) along the non-concatenated axis ${o}.`))}))}function A(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}function M(t){return t<=30?t:(0,i.O)(t,Math.floor(Math.sqrt(t)))}function S(t,e,n){return[n*("number"==typeof t?t:t[0]),e*("number"==typeof t?t:t[1])]}function I(t,e,n,r=!0){let i=[];if(r)i=i.concat(e.slice(0)),i.push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);const n=e.length;for(let r=0;r<n;++r)i=i.concat([t[r+1]/e[r],e[r]]);i=i.concat(t.slice(n+1))}return i}function T(t,e,n=!0){const r=[];if(n){r.push(e);for(let n=e+1;n<t;++n)n<=2*e?(r.push(n),r.push(n-(e+1))):r.push(n)}else{const n=[],i=[];for(let r=1;r<t;++r)r>=2*e+1||r%2==1?i.push(r):n.push(r);r.push(...n),r.push(0),r.push(...i)}return r}function _(t,e,n,r=!0){const i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(let n=1;n<t.length;++n)n<=e.length?r?i.push(e[n-1]*t[n]):i.push(t[n]/e[n-1]):i.push(t[n]);return i}function O(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function k(t,e,n){const r=t.slice(0,1);for(let i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}const R=1.7580993408473768,C=1.0507009873554805,B=.3275911,P=.254829592,F=-.284496736,j=1.421413741,N=-1.453152027,L=1.061405429;function D(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(2*t.length);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}const U=/->/g;function $(t,e){const n=((t=t.replace(/\s/g,"")).length-t.replace(U,"").length)/"->".length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error('Equation must contain exactly one arrow ("->").');const[r,o]=t.split("->");(0,i.a)(-1===r.indexOf("..."),(()=>'The ellipsis notation ("...") is not supported yet.'));const s=r.split(","),a=s.length;if(e!==a)throw new Error(`Expected ${a} input tensors, received ${e}`);if(a>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const l=[];for(let t=0;t<o.length;++t){const e=o[t];if(!s.some((t=>-1!==t.indexOf(e))))throw new Error(`Output subscripts contain the label ${e} not present in the input subscripts.`);-1===l.indexOf(e)&&l.push(e)}for(let t=0;t<r.length;++t){const e=r[t];-1===l.indexOf(e)&&","!==e&&l.push(e)}const u=new Array(s.length);for(let t=0;t<a;++t){if(new Set(s[t].split("")).size!==s[t].length)throw new Error(`Found duplicate axes in input component ${s[t]}. Support for duplicate axes in input is not implemented yet.`);u[t]=[];for(let e=0;e<s[t].length;++e)u[t].push(l.indexOf(s[t][e]))}const h=l.length,c=[];for(let t=o.length;t<h;++t)c.push(t);return{allDims:l,summedDims:c,idDims:u}}function z(t,e){let n=new Array(t);n.fill(-1);for(let t=0;t<e.length;++t)n[e[t]]=t;const r=[];for(let e=0;e<t;++e)-1===n[e]&&r.push(e);return n=n.filter((t=>-1!==t)),{permutationIndices:n,expandDims:r}}function H(t,e,n){const r=new Array(t);for(let t=0;t<n.length;++t){const o=n[t].shape;for(let n=0;n<e[t].length;++n)void 0===r[e[t][n]]?r[e[t][n]]=o[n]:(0,i.a)(r[e[t][n]]===o[n],(()=>`Expected dimension ${r[e[t][n]]} at axis ${n} of input shaped ${JSON.stringify(o)}, but got dimension ${o[n]}`))}}function q(t,e){const n=t,r=[];let i=0;0===t.length&&n.push(-1),i=t.length+1;for(let t=0;t<i;++t)r.push([]);const o=[];for(let t=0;t<n.length;++t){const i=V(e,n[t]);for(const e of i)-1===o.indexOf(e)&&(r[t].push(e),o.push(e))}return{path:n,steps:r}}function W(t){return t.every(((t,e)=>t===e))}function V(t,e){const n=[];for(let r=0;r<t.length;++r)0!==t[r].length&&-1===t[r].indexOf(e)&&-1!==e||n.push(r);return n}function G(t,e,n=0){let r=[];if("number"==typeof e)(0,i.a)(t.shape[n]%e==0,(()=>"Number of splits must evenly divide the axis.")),r=new Array(e).fill(t.shape[n]/e);else{const o=e.reduce(((t,e)=>(-1===e&&(t+=1),t)),0);(0,i.a)(o<=1,(()=>"There should be only one negative value in split array."));const s=e.indexOf(-1);if(-1!==s){const r=e.reduce(((t,e)=>e>0?t+e:t));e[s]=t.shape[n]-r}(0,i.a)(t.shape[n]===e.reduce(((t,e)=>t+e)),(()=>"The sum of sizes must match the size of the axis dimension.")),r=e}return r}function J(t){return`Received SparseTensor with denseShape[0] = 0 but\n  indices.shape[0] = ${t}`}function X(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function K(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}function Y(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function Z(t,e){return`size ${t} must be non-negative, not ${e}`}function Q(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function tt(t,e){return`Input to reshape is a SparseTensor with ${(0,i.s)(t)}\n  dense values, but the requested shape requires a multiple of ${(0,i.s)(e)}. inputShape=${t} outputShape= ${e}`}function et(t,e){return`Input to reshape is a tensor with ${(0,i.s)(t)} dense values, but the requested shape has ${(0,i.s)(e)}. inputShape=${t} outputShape=${e}`}function nt(){return"segment ids must be >= 0"}function rt(){return"segment ids are not increasing"}function it(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function ot(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}function st(t,e){let n,r=!1;for(t<=30?(n=t,r=!0):n=(0,i.O)(t,Math.floor(Math.sqrt(t)));!r;)n>e||n===t?r=!0:n=(0,i.O)(t,n+1);return n}function at(t,e,n){const r=[],i=t.length;for(let o=0;o<i;o++)o!==e?r.push(t[o]):r.push(n);return r}function lt(t,e,n,r){const i=e.shape.length,o=t.shape.length;if(0!==r&&(r<-i||r>i))throw new Error(`Expect batchDims in the range of [-${i}, ${i}], but got ${r}`);if(r<0&&(r+=i),r>o)throw new Error(`batchDims (${r}) must be less than rank(x) (\n    ${o}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let n=0;n<r;++n)if(t.shape[n]!==e.shape[n])throw new Error(`x.shape[${n}]: ${t.shape[n]} should be equal to indices.shape[${n}]: ${e.shape[n]}.`);const s=t.shape[n],a=[];let l=1,u=1,h=1;for(let e=0;e<r;++e)a.push(t.shape[e]),l*=t.shape[e];for(let e=r;e<n;e++)a.push(t.shape[e]),u*=t.shape[e];for(let t=r;t<i;t++)a.push(e.shape[t]);for(let e=n+1;e<o;e++)a.push(t.shape[e]),h*=t.shape[e];return{batchSize:l,sliceSize:h,outerSize:u,dimSize:s,outputShape:a}}var ut=Object.freeze({__proto__:null,segOpComputeOptimalWindowSize:st,computeOutShape:at,collectGatherOpShapeInfo:lt});function ht(t){try{return t.map((t=>(0,r.b$)(t)))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function ct(t){return t.map((t=>(0,r.bZ)(t)))}var ft=Object.freeze({__proto__:null,slice_util:x,segment_util:ut,fromUint8ToStringArray:ht,fromStringArrayToUint8:ct,upcastType:r.bY,axesAreInnerMostDims:r.c0,combineLocations:r.c1,computeOutAndReduceShapes:r.bX,expandShapeToKeepDim:r.aF,assertAxesAreInnerMostDims:r.c2,getAxesPermutation:r.c3,getUndoAxesPermutation:r.c4,getInnerMostAxes:r.c5,getBroadcastDims:r.bV,getReductionAxes:r.c6,assertAndGetBroadcastShape:r.ae,assertParamsConsistent:E,computeOutShape:A,computeDilation2DInfo:r.c7,computePool2DInfo:r.c8,computePool3DInfo:r.c9,computeConv2DInfo:r.bt,computeConv3DInfo:r.ca,computeDefaultPad:r.cb,tupleValuesAreOne:r.bw,eitherStridesOrDilationsAreOne:r.P,convertConv2DDataFormat:r.cc,checkPadOnDimRoundingMode:r.Q,getFusedDyActivation:r.bv,getFusedBiasGradient:r.bx,applyActivation:r.bs,shouldFuse:r.br,PARALLELIZE_THRESHOLD:30,computeOptimalWindowSize:M,getImageCenter:S,getReshaped:I,getPermuted:T,getReshapedPermuted:_,getSliceBeginCoords:O,getSliceSize:k,prepareAndValidate:o,validateUpdateShape:r.cd,validateInput:r.bm,calculateShapes:r.ce,SELU_SCALEALPHA:R,SELU_SCALE:C,ERF_P:B,ERF_A1:P,ERF_A2:F,ERF_A3:j,ERF_A4:N,ERF_A5:L,warn:r.cf,log:r.cg,mergeRealAndImagArrays:D,splitRealAndImagArrays:function(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}},complexWithEvenIndex:function(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let e=0;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}},complexWithOddIndex:function(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let e=2;e<t.length;e+=4)n[Math.floor(e/4)]=t[e],r[Math.floor(e/4)]=t[e+1];return{real:n,imag:r}},getComplexWithIndex:function(t,e){return{real:t[2*e],imag:t[2*e+1]}},assignToTypedArray:function(t,e,n,r){t[2*r]=e,t[2*r+1]=n},exponents:function(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let i=0;i<Math.ceil(t/2);i++){const o=(e?2:-2)*Math.PI*(i/t);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}},exponent:function(t,e,n){const r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}},decodeEinsumEquation:$,getEinsumPermutation:z,checkEinsumDimSizes:H,getEinsumComputePath:q,isIdentityPermutation:W,prepareSplitSize:G,getSparseFillEmptyRowsIndicesDenseShapeMismatch:J,getSparseFillEmptyRowsNegativeIndexErrorMessage:X,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:K,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:Y,getSparseReshapeNegativeOutputDimErrorMessage:Z,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:Q,getSparseReshapeInputOutputMultipleErrorMessage:tt,getSparseReshapeInputOutputMismatchErrorMessage:et,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:nt,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:rt,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:it,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:ot})},7760:(t,e,n)=>{n.d(e,{D:()=>l,I:()=>b,a:()=>A,b:()=>m,c:()=>w,d:()=>h,e:()=>y,f:()=>g,g:()=>M,h:()=>s,i:()=>o,j:()=>p,k:()=>u,l:()=>x,m:()=>Z,n:()=>K,o:()=>Q,p:()=>Y,r:()=>E}),n(5389),n(3807);var r=n(198),i=n(3077);function o(t){if(t||"undefined"!=typeof navigator&&null!=navigator){if(t||(t=navigator),"ReactNative"===t.product)return!0;const e=t.userAgent||t.vendor||("undefined"!=typeof window?window.opera:"");if(!e){const e=t;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function s(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}const a=(0,r.e)();a.registerFlag("DEBUG",(()=>!1),(t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),a.registerFlag("IS_BROWSER",(()=>s())),a.registerFlag("IS_NODE",(()=>void 0!==r.i&&void 0!==r.i.versions&&void 0!==r.i.versions.node)),a.registerFlag("IS_CHROME",(()=>"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor))),a.registerFlag("PROD",(()=>!1)),a.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(()=>a.getBool("DEBUG"))),a.registerFlag("DEPRECATION_WARNINGS_ENABLED",(()=>!0)),a.registerFlag("IS_TEST",(()=>!1)),a.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",(()=>!0)),a.registerFlag("WRAP_TO_IMAGEBITMAP",(()=>!1));const l={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};async function u(t,e){const n=[],r=[],i=Array.isArray(t)?t.map((t=>t.name)):Object.keys(t);for(let o=0;o<i.length;++o){const s=i[o],a=Array.isArray(t)?t[o].tensor:t[s];if("float32"!==a.dtype&&"int32"!==a.dtype&&"bool"!==a.dtype&&"string"!==a.dtype&&"complex64"!==a.dtype)throw new Error(`Unsupported dtype in weight '${s}': ${a.dtype}`);const l={name:s,shape:a.shape,dtype:a.dtype};if("string"===a.dtype){const t=new Promise((async t=>{const e=await a.bytes(),n=e.reduce(((t,e)=>t+e.length),0)+4*e.length,r=new Uint8Array(n);let i=0;for(let t=0;t<e.length;t++){const n=e[t],o=new Uint8Array(new Uint32Array([n.length]).buffer);r.set(o,i),i+=4,r.set(n,i),i+=n.length}t(r)}));r.push(t)}else r.push(a.data());null!=e&&(l.group=e),n.push(l)}return{data:c(await Promise.all(r)),specs:n}}function h(t,e){const n={};let o,s=0;for(const a of e){const e=a.name,u=a.dtype,h=a.shape,c=(0,i.s)(h);let f;if("quantization"in a){const n=a.quantization;if("uint8"===n.dtype||"uint16"===n.dtype){if(!("min"in n)||!("scale"in n))throw new Error(`Weight ${a.name} with quantization ${n.dtype} doesn't have corresponding metadata min and scale.`)}else{if("float16"!==n.dtype)throw new Error(`Weight ${a.name} has unknown quantization dtype ${n.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);if("float32"!==u)throw new Error(`Weight ${a.name} is quantized with ${n.dtype} which only supports weights of type float32 not ${u}.`)}const r=l[n.dtype],i=t.slice(s,s+c*r),h="uint8"===n.dtype?new Uint8Array(i):new Uint16Array(i);if("float32"===u)if("uint8"===n.dtype||"uint16"===n.dtype){f=new Float32Array(h.length);for(let t=0;t<h.length;t++){const e=h[t];f[t]=e*n.scale+n.min}}else{if("float16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type float32.`);void 0===o&&(o=v()),f=o(h)}else{if("int32"!==u)throw new Error(`Unsupported dtype in weight '${e}': ${u}`);if("uint8"!==n.dtype&&"uint16"!==n.dtype)throw new Error(`Unsupported quantization type ${n.dtype} for weight type int32.`);f=new Int32Array(h.length);for(let t=0;t<h.length;t++){const e=h[t];f[t]=Math.round(e*n.scale+n.min)}}s+=c*r}else if("string"===u){const e=(0,i.s)(a.shape);f=[];for(let n=0;n<e;n++){const e=new Uint32Array(t.slice(s,s+4))[0];s+=4;const n=new Uint8Array(t.slice(s,s+e));f.push(n),s+=e}}else{const i=l[u],o=t.slice(s,s+c*i);if("float32"===u)f=new Float32Array(o);else if("int32"===u)f=new Int32Array(o);else if("bool"===u)f=new Uint8Array(o);else{if("complex64"!==u)throw new Error(`Unsupported dtype in weight '${e}': ${u}`);{f=new Float32Array(o);const t=new Float32Array(f.length/2),i=new Float32Array(f.length/2);for(let e=0;e<t.length;e++)t[e]=f[2*e],i[e]=f[2*e+1];const s=(0,r.t)(t,h,"float32"),a=(0,r.t)(i,h,"float32");n[e]=(0,r.g)(s,a),s.dispose(),a.dispose()}}s+=c*i}"complex64"!==u&&(n[e]=(0,r.t)(f,h,u))}return n}function c(t){if(null===t)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach((t=>{if(e+=t.byteLength,n.push(t.byteLength===t.buffer.byteLength?t:new t.constructor(t)),!(t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${t.constructor.name}`)}));const r=new Uint8Array(e);let i=0;return n.forEach((t=>{r.set(new Uint8Array(t.buffer),i),i+=t.byteLength})),r.buffer}const f="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function d(t){return f?Buffer.byteLength(t):new Blob([t]).size}function g(t){if(1===t.length)return t[0];let e=0;t.forEach((t=>{e+=t.byteLength}));const n=new Uint8Array(e);let r=0;return t.forEach((t=>{n.set(new Uint8Array(t),r),r+=t.byteLength})),n.buffer}function p(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);const e=t.split("/");return e[e.length-1]}function m(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer),null!=t.trainingConfig&&(n.trainingConfig=t.trainingConfig),n}async function y(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(null!=t.trainingConfig&&(n.trainingConfig=t.trainingConfig),null!=t.weightsManifest){const[r,i]=await e(t.weightsManifest);n.weightSpecs=r,n.weightData=i}return null!=t.signature&&(n.signature=t.signature),null!=t.userDefinedMetadata&&(n.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(n.modelInitializer=t.modelInitializer),n}function w(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==t.modelTopology?0:d(JSON.stringify(t.modelTopology)),weightSpecsBytes:null==t.weightSpecs?0:d(JSON.stringify(t.weightSpecs)),weightDataBytes:null==t.weightData?0:t.weightData.byteLength}}function v(){const t=function(){const t=t=>{let e=t<<13,n=0;for(;0==(8388608&e);)n-=8388608,e<<=1;return e&=-8388609,n+=947912704,e|n},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let t=1024;t<2048;t++)e[t]=939524096+(t-1024<<13);return e}(),e=function(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}(),n=function(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}();return r=>{const i=new ArrayBuffer(4*r.length),o=new Uint32Array(i);for(let i=0;i<r.length;i++){const s=r[i],a=t[n[s>>10]+(1023&s)]+e[s>>10];o[i]=a}return new Float32Array(i)}}class b{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return null==b.instance&&(b.instance=new b),b.instance}static registerSaveRouter(t){b.getInstance().saveRouters.push(t)}static registerLoadRouter(t){b.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return b.getHandlers(t,"save")}static getLoadHandlers(t,e){return b.getHandlers(t,"load",e)}static getHandlers(t,e,n){const r=[];return("load"===e?b.getInstance().loadRouters:b.getInstance().saveRouters).forEach((e=>{const i=e(t,n);null!==i&&r.push(i)})),r}}const x=t=>b.registerSaveRouter(t),E=t=>b.registerLoadRouter(t),A=t=>b.getSaveHandlers(t),M=(t,e)=>b.getLoadHandlers(t,e),S="tensorflowjs",I="models_store",T="model_info_store";function _(){if(!(0,r.e)().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t="undefined"==typeof window?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(null==e)throw new Error("The current browser does not appear to support IndexedDB.");return e}function O(t){const e=t.result;e.createObjectStore(I,{keyPath:"modelPath"}),e.createObjectStore(T,{keyPath:"modelPath"})}class k{constructor(t){if(this.indexedDB=_(),null==t||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,t)}async load(){return this.databaseAction(this.modelPath)}databaseAction(t,e){return new Promise(((t,n)=>{const r=this.indexedDB.open(S,1);r.onupgradeneeded=()=>O(r),r.onsuccess=()=>{const i=r.result;if(null==e){const e=i.transaction(I,"readonly"),r=e.objectStore(I).get(this.modelPath);r.onsuccess=()=>{if(null==r.result)return i.close(),n(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));t(r.result.modelArtifacts)},r.onerror=t=>(i.close(),n(r.error)),e.oncomplete=()=>i.close()}else{const r=w(e),o=i.transaction(T,"readwrite");let s=o.objectStore(T);const a=s.put({modelPath:this.modelPath,modelArtifactsInfo:r});let l;a.onsuccess=()=>{l=i.transaction(I,"readwrite");const a=l.objectStore(I).put({modelPath:this.modelPath,modelArtifacts:e,modelArtifactsInfo:r});a.onsuccess=()=>t({modelArtifactsInfo:r}),a.onerror=t=>{s=o.objectStore(T);const e=s.delete(this.modelPath);e.onsuccess=()=>(i.close(),n(a.error)),e.onerror=t=>(i.close(),n(a.error))}},a.onerror=t=>(i.close(),n(a.error)),o.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}}},r.onerror=t=>n(r.error)}))}}k.URL_SCHEME="indexeddb://";const R=t=>{return(0,r.e)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(k.URL_SCHEME)?(e=t.slice(k.URL_SCHEME.length),new k(e)):null;var e};b.registerSaveRouter(R),b.registerLoadRouter(R);class C{constructor(){this.indexedDB=_()}async listModels(){return new Promise(((t,e)=>{const n=this.indexedDB.open(S,1);n.onupgradeneeded=()=>O(n),n.onsuccess=()=>{const r=n.result,i=r.transaction(T,"readonly"),o=i.objectStore(T).getAll();o.onsuccess=()=>{const e={};for(const t of o.result)e[t.modelPath]=t.modelArtifactsInfo;t(e)},o.onerror=t=>(r.close(),e(o.error)),i.oncomplete=()=>r.close()},n.onerror=t=>e(n.error)}))}async removeModel(t){var e;return t=(e=t).startsWith(k.URL_SCHEME)?e.slice(k.URL_SCHEME.length):e,new Promise(((e,n)=>{const r=this.indexedDB.open(S,1);r.onupgradeneeded=()=>O(r),r.onsuccess=()=>{const i=r.result,o=i.transaction(T,"readwrite"),s=o.objectStore(T),a=s.get(t);let l;a.onsuccess=()=>{if(null==a.result)return i.close(),n(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{const r=s.delete(t),o=()=>{l=i.transaction(I,"readwrite");const r=l.objectStore(I).delete(t);r.onsuccess=()=>e(a.result.modelArtifactsInfo),r.onerror=t=>n(a.error)};r.onsuccess=o,r.onerror=t=>(o(),i.close(),n(a.error))}},a.onerror=t=>(i.close(),n(a.error)),o.oncomplete=()=>{null==l?i.close():l.oncomplete=()=>i.close()}},r.onerror=t=>n(r.error)}))}}const B="/",P="tensorflowjs_models",F="info",j="model_topology",N="weight_specs",L="weight_data",D="model_metadata";function U(t){return{info:[P,t,F].join(B),topology:[P,t,j].join(B),weightSpecs:[P,t,N].join(B),weightData:[P,t,L].join(B),modelMetadata:[P,t,D].join(B)}}function $(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function z(t){const e=t.split(B);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(B)}class H{constructor(t){if(!(0,r.e)().getBool("IS_BROWSER")||"undefined"==typeof window||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==t||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=U(this.modelPath)}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const e=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),r=w(t);try{this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,e),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(t){if(f)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let t=0,r=e.length;t<r;t++)n+=String.fromCharCode(e[t]);return btoa(n)}(t.weightData));const i={format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,signature:null!=t.signature?t.signature:void 0,userDefinedMetadata:null!=t.userDefinedMetadata?t.userDefinedMetadata:void 0,modelInitializer:null!=t.modelInitializer?t.modelInitializer:void 0,trainingConfig:null!=t.trainingConfig?t.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(i)),{modelArtifactsInfo:r}}catch(t){throw $(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${r.modelTopologyBytes}, weightSpecsBytes=${r.weightSpecsBytes}, weightDataBytes=${r.weightDataBytes}.`)}}}async load(){const t=JSON.parse(this.LS.getItem(this.keys.info));if(null==t)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if("JSON"!==t.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const e={},n=JSON.parse(this.LS.getItem(this.keys.topology));if(null==n)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);e.modelTopology=n;const r=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(null==r)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);e.weightSpecs=r;const i=this.LS.getItem(this.keys.modelMetadata);if(null!=i){const t=JSON.parse(i);e.format=t.format,e.generatedBy=t.generatedBy,e.convertedBy=t.convertedBy,null!=t.signature&&(e.signature=t.signature),null!=t.userDefinedMetadata&&(e.userDefinedMetadata=t.userDefinedMetadata),null!=t.modelInitializer&&(e.modelInitializer=t.modelInitializer),null!=t.trainingConfig&&(e.trainingConfig=t.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(null==o)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return e.weightData=function(t){if(f){const e=Buffer.from(t,"base64");return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let t=0;t<e.length;++t)n.set([e.charCodeAt(t)],t);return n.buffer}(o),e}}H.URL_SCHEME="localstorage://";const q=t=>{return(0,r.e)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(H.URL_SCHEME)?(e=t.slice(H.URL_SCHEME.length),new H(e)):null;var e};b.registerSaveRouter(q),b.registerLoadRouter(q);class W{constructor(){(0,i.a)((0,r.e)().getBool("IS_BROWSER"),(()=>"Current environment is not a web browser")),(0,i.a)("undefined"==typeof window||void 0!==window.localStorage,(()=>"Current browser does not appear to support localStorage")),this.LS=window.localStorage}async listModels(){const t={},e=P+B,n=B+F;for(let r=0;r<this.LS.length;++r){const i=this.LS.key(r);i.startsWith(e)&&i.endsWith(n)&&(t[z(i)]=JSON.parse(this.LS.getItem(i)))}return t}async removeModel(t){var e;const n=U(t=(e=t).startsWith(H.URL_SCHEME)?e.slice(H.URL_SCHEME.length):e);if(null==this.LS.getItem(n.info))throw new Error(`Cannot find model at path '${t}'`);const r=JSON.parse(this.LS.getItem(n.info));return $(n),r}}const V="://";class G{constructor(){this.managers={}}static getInstance(){return null==G.instance&&(G.instance=new G),G.instance}static registerManager(t,e){(0,i.a)(null!=t,(()=>"scheme must not be undefined or null.")),t.endsWith(V)&&(t=t.slice(0,t.indexOf(V))),(0,i.a)(t.length>0,(()=>"scheme must not be an empty string."));const n=G.getInstance();(0,i.a)(null==n.managers[t],(()=>`A model store manager is already registered for scheme '${t}'.`)),n.managers[t]=e}static getManager(t){const e=this.getInstance().managers[t];if(null==e)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(this.getInstance().managers)}}function J(t){if(-1===t.indexOf(V))throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${G.getSchemes().join(",")}`);return{scheme:t.split(V)[0],path:t.split(V)[1]}}async function X(t,e,n=!1){(0,i.a)(t!==e,(()=>`Old path and new path are the same: '${t}'`));const r=b.getLoadHandlers(t);(0,i.a)(r.length>0,(()=>`Copying failed because no load handler is found for source URL ${t}.`)),(0,i.a)(r.length<2,(()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`));const o=r[0],s=b.getSaveHandlers(e);(0,i.a)(s.length>0,(()=>`Copying failed because no save handler is found for destination URL ${e}.`)),(0,i.a)(s.length<2,(()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`));const a=s[0],l=J(t).scheme,u=J(t).path,h=l===J(t).scheme,c=await o.load();n&&h&&await G.getManager(l).removeModel(u);const f=await a.save(c);return n&&!h&&await G.getManager(l).removeModel(u),f.modelArtifactsInfo}async function K(){const t=G.getSchemes(),e={};for(const n of t){const t=await G.getManager(n).listModels();for(const r in t)e[n+V+r]=t[r]}return e}async function Y(t){const e=J(t);return G.getManager(e.scheme).removeModel(e.path)}async function Z(t,e){return X(t,e,!1)}async function Q(t,e){return X(t,e,!0)}class tt{fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}}if((0,r.e)().get("IS_BROWSER")){(0,r.e)().setPlatform("browser",new tt);try{G.registerManager(H.URL_SCHEME,new W)}catch(t){}try{G.registerManager(k.URL_SCHEME,new C)}catch(t){}}let et;(0,r.e)().get("IS_NODE")&&(0,r.e)().setPlatform("node",new class{constructor(){this.util=n(1323),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return null!=(0,r.e)().global.fetch?(0,r.e)().global.fetch(t,e):(null==et&&(et=n(759)),et(t,e))}now(){const t=r.i.hrtime();return 1e3*t[0]+t[1]/1e6}encode(t,e){if("utf-8"!==e&&"utf8"!==e)throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(t)}decode(t,e){return 0===t.length?"":new this.util.TextDecoder(e).decode(t)}}),(0,r.j)();const nt={buffer:r.n,cast:r.c,clone:r.a,print:function(t,e=!1){console.log(t.toString(e))}};(0,r.k)(nt)},5492:(t,e,n)=>{n.d(e,{f:()=>s}),n(5389),n(3807);var r=n(198),i=n(3077);let o;const s=(0,r.o)({fromPixels_:function(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(null==t)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,s=!1,a=!1,l=!1,u=!1,h=!1;if(t.data instanceof Uint8Array)n=!0;else if("undefined"!=typeof ImageData&&t instanceof ImageData)s=!0;else if("undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement)a=!0;else if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement)l=!0;else if(null!=t.getContext)u=!0;else{if(!("undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap))throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);h=!0}if(a){const e=2;if(a&&t.readyState<e)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.")}if(null!=(0,r.bT)(r.bU,r.E.backendName)){const n={pixels:t},i={numChannels:e};return r.E.runKernel(r.bU,n,i)}const[c,f]=a?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d,g;if(u)d=t.getContext("2d").getImageData(0,0,c,f).data;else if(s||n)d=t.data;else if(l||a||h){if(null==o)if("undefined"==typeof document){if("undefined"==typeof OffscreenCanvas||"undefined"==typeof OffscreenCanvasRenderingContext2D)throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");o=new OffscreenCanvas(1,1).getContext("2d")}else o=document.createElement("canvas").getContext("2d");o.canvas.width=c,o.canvas.height=f,o.drawImage(t,0,0,c,f),d=o.getImageData(0,0,c,f).data}if(4===e)g=new Int32Array(d);else{const t=c*f;g=new Int32Array(t*e);for(let n=0;n<t;n++)for(let t=0;t<e;++t)g[n*e+t]=d[4*n+t]}return function(t,e,n){if((0,i.g)(t),null!=e&&3!==e.length)throw new Error("tensor3d() requires shape to have three numbers");const o=(0,r.bh)(t,n);if(3!==o.length&&1!==o.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===o.length&&null==e)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return(0,r.bi)(t,e,o,n)}(g,[f,c,e],"int32")}})},1462:(t,e,n)=>{n.d(e,{b:()=>l});var r=n(7760),i=n(198);function o(t){return new Promise((t=>setTimeout(t))).then(t)}class s{constructor(t){if(!(0,i.e)().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(s.URL_SCHEME)&&(t=t.slice(s.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelJsonFileName=t+".json",this.weightDataFileName=t+".weights.bin"}async save(t){if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");const e=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"}));if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],i=(0,r.b)(t,n),s=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=null==this.modelJsonAnchor?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=s,await o((()=>a.dispatchEvent(new MouseEvent("click")))),null!=t.weightData){const t=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor;t.download=this.weightDataFileName,t.href=e,await o((()=>t.dispatchEvent(new MouseEvent("click"))))}return{modelArtifactsInfo:(0,r.c)(t)}}}}s.URL_SCHEME="downloads://";class a{constructor(t){if(null==t||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}async load(){return new Promise(((t,e)=>{const n=new FileReader;n.onload=n=>{const i=JSON.parse(n.target.result),o=i.modelTopology;if(null==o)return void e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));if(null==i.weightsManifest)return void e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));if(0===this.weightsFiles.length)return void t({modelTopology:o});const s=(0,r.e)(i,(t=>this.loadWeights(t)));t(s)},n.onerror=t=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)}))}loadWeights(t){const e=[],n=[];for(const r of t)e.push(...r.weights),n.push(...r.paths);const i=this.checkManifestAndWeightFiles(t),o=n.map((t=>this.loadWeightsFile(t,i[t])));return Promise.all(o).then((t=>[e,(0,r.f)(t)]))}loadWeightsFile(t,e){return new Promise(((n,r)=>{const i=new FileReader;i.onload=t=>{const e=t.target.result;n(e)},i.onerror=e=>r(`Failed to weights data from file of path '${t}'.`),i.readAsArrayBuffer(e)}))}checkManifestAndWeightFiles(t){const e=[],n=this.weightsFiles.map((t=>(0,r.j)(t.name))),i={};for(const o of t)o.paths.forEach((t=>{const o=(0,r.j)(t);if(-1!==e.indexOf(o))throw new Error(`Duplicate file basename found in weights manifest: '${o}'`);if(e.push(o),-1===n.indexOf(o))throw new Error(`Weight file with basename '${o}' is not provided.`);i[t]=this.weightsFiles[n.indexOf(o)]}));if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return i}}function l(t){return new a(t)}r.I.registerSaveRouter((t=>(0,i.e)().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(s.URL_SCHEME)?function(t="model"){return new s(t)}(t.slice(s.URL_SCHEME.length)):null))},5599:(t,e,n)=>{n.d(e,{A:()=>x,a:()=>o,b:()=>I,c:()=>s,d:()=>S,e:()=>M,f:()=>A,g:()=>E}),n(5389),n(3807);const r=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),i=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),o=(t,e)=>({startTime:e,type:"setValue",value:t}),s=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),a=(t,e,{startTime:n,target:r,timeConstant:i})=>r+(e-r)*Math.exp((n-t)/i),l=t=>"exponentialRampToValue"===t.type,u=t=>"linearRampToValue"===t.type,h=t=>l(t)||u(t),c=t=>"setValue"===t.type,f=t=>"setValueCurve"===t.type,d=(t,e,n,r)=>{const i=t[e];return void 0===i?r:h(i)||c(i)?i.value:f(i)?i.values[i.values.length-1]:a(n,d(t,e-1,i.startTime,r),i)},g=(t,e,n,r,i)=>void 0===n?[r.insertTime,i]:h(n)?[n.endTime,n.value]:c(n)?[n.startTime,n.value]:f(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,d(t,e-1,n.startTime,i)],p=t=>"cancelAndHold"===t.type,m=t=>"cancelScheduledValues"===t.type,y=t=>p(t)||m(t)?t.cancelTime:l(t)||u(t)?t.endTime:t.startTime,w=(t,e,n,{endTime:r,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(r-e)):0,v=(t,e,n,{endTime:r,value:i})=>n+(t-e)/(r-e)*(i-n),b=t=>"setTarget"===t.type;class x{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=y(t);if(p(t)||m(t)){const n=this._automationEvents.findIndex((n=>m(t)&&f(n)?n.startTime+n.duration>=e:y(n)>=e)),a=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),p(t)){const t=this._automationEvents[this._automationEvents.length-1];if(void 0!==a&&h(a)){if(b(t))throw new Error("The internal list is malformed.");const n=f(t)?t.startTime+t.duration:y(t),o=f(t)?t.values[t.values.length-1]:t.value,s=l(a)?w(e,n,o,a):v(e,n,o,a),u=l(a)?r(s,e,this._currenTime):i(s,e,this._currenTime);this._automationEvents.push(u)}void 0!==t&&b(t)&&this._automationEvents.push(o(this.getValue(e),e)),void 0!==t&&f(t)&&t.startTime+t.duration>e&&(this._automationEvents[this._automationEvents.length-1]=s(new Float32Array([6,7]),t.startTime,e-t.startTime))}}else{const n=this._automationEvents.findIndex((t=>y(t)>e)),o=-1===n?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[n-1];if(void 0!==o&&f(o)&&y(o)+o.duration>e)return!1;const s=l(t)?r(t.value,t.endTime,this._currenTime):u(t)?i(t.value,e,this._currenTime):t;if(-1===n)this._automationEvents.push(s);else{if(f(t)&&e+t.duration>y(this._automationEvents[n]))return!1;this._automationEvents.splice(n,0,s)}}return!0}flush(t){const e=this._automationEvents.findIndex((e=>y(e)>t));if(e>1){const t=this._automationEvents.slice(e-1),n=t[0];b(n)&&t.unshift(o(d(this._automationEvents,e-2,n.startTime,this._defaultValue),n.startTime)),this._automationEvents=t}}getValue(t){if(0===this._automationEvents.length)return this._defaultValue;const e=this._automationEvents.findIndex((e=>y(e)>t)),n=this._automationEvents[e],r=(-1===e?this._automationEvents.length:e)-1,i=this._automationEvents[r];if(void 0!==i&&b(i)&&(void 0===n||!h(n)||n.insertTime>t))return a(t,d(this._automationEvents,r-1,i.startTime,this._defaultValue),i);if(void 0!==i&&c(i)&&(void 0===n||!h(n)))return i.value;if(void 0!==i&&f(i)&&(void 0===n||!h(n)||i.startTime+i.duration>t))return t<i.startTime+i.duration?((t,{duration:e,startTime:n,values:r})=>((t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]})(r,(t-n)/e*(r.length-1)))(t,i):i.values[i.values.length-1];if(void 0!==i&&h(i)&&(void 0===n||!h(n)))return i.value;if(void 0!==n&&l(n)){const[e,o]=g(this._automationEvents,r,i,n,this._defaultValue);return w(t,e,o,n)}if(void 0!==n&&u(n)){const[e,o]=g(this._automationEvents,r,i,n,this._defaultValue);return v(t,e,o,n)}return this._defaultValue}}const E=t=>({cancelTime:t,type:"cancelAndHold"}),A=t=>({cancelTime:t,type:"cancelScheduledValues"}),M=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),S=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),I=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"})},8497:(t,e,n)=>{var r=n(748);r.ab,r.aa,r.aC},5527:(t,e,n)=>{n.d(e,{b:()=>g,h:()=>d,i:()=>c,l:()=>l,w:()=>u}),n(5389),n(3807);var r=n(198),i=n(7760),o=n(3077);function s(t,e,n,r){!function(t){(0,o.a)(null!=t&&Array.isArray(t)&&t.length>0,(()=>"promises must be a none empty array"))}(t),function(t,e){(0,o.a)(t>=0&&t<=1,(()=>`Progress fraction must be in range [0, 1], but got startFraction ${t}`)),(0,o.a)(e>=0&&e<=1,(()=>`Progress fraction must be in range [0, 1], but got endFraction ${e}`)),(0,o.a)(e>=t,(()=>`startFraction must be no more than endFraction, but got startFraction ${t} and endFraction ${e}`))}(n=null==n?0:n,r=null==r?1:r);let i=0;return Promise.all(t.map((o=>(o.then((o=>{const s=n+ ++i/t.length*(r-n);return e(s),o})),o))))}async function a(t,e){null==e&&(e={});const n=null==e.fetchFunc?(0,r.e)().platform.fetch:e.fetchFunc,i=t.map((t=>n(t,e.requestInit,{isBinary:!0}))),o=(null==e.onProgress?await Promise.all(i):await s(i,e.onProgress,0,.5)).map((t=>t.arrayBuffer()));return null==e.onProgress?await Promise.all(o):await s(o,e.onProgress,.5,1)}async function l(t,e="",n,r){return u((t=>a(t,{requestInit:r})))(t,e,n)}function u(t){return async(e,n="",r)=>{const s=e.map((()=>!1)),a={},l=null!=r?r.map((()=>!1)):[],u=[];if(e.forEach(((t,e)=>{let n=0;t.weights.forEach((t=>{const h="quantization"in t?t.quantization.dtype:t.dtype,c=i.D[h]*(0,o.s)(t.shape),f=()=>{s[e]=!0,null==a[e]&&(a[e]=[]),a[e].push({manifestEntry:t,groupOffset:n,sizeBytes:c})};null!=r?r.forEach(((e,n)=>{e===t.name&&(f(),l[n]=!0)})):f(),u.push(t.name),n+=c}))})),!l.every((t=>t))){const t=r.filter(((t,e)=>!l[e]));throw new Error(`Could not find weights in manifest with names: ${t.join(", ")}. \nManifest JSON has weights with names: ${u.join(", ")}.`)}const h=s.reduce(((t,e,n)=>(e&&t.push(n),t)),[]),c=[];h.forEach((t=>{e[t].paths.forEach((t=>{const e=n+(n.endsWith("/")?"":"/")+t;c.push(e)}))}));const f=await t(c),d={};let g=0;return h.forEach((t=>{const n=e[t].paths.length;let r=0;for(let t=0;t<n;t++)r+=f[g+t].byteLength;const o=new ArrayBuffer(r),s=new Uint8Array(o);let l=0;for(let t=0;t<n;t++){const e=new Uint8Array(f[g+t]);s.set(e,l),l+=e.byteLength}a[t].forEach((t=>{const e=o.slice(t.groupOffset,t.groupOffset+t.sizeBytes),n=(0,i.d)(e,[t.manifestEntry]);for(const t in n)d[t]=n[t]})),g+=n})),d}}class h{constructor(t,e){if(this.DEFAULT_METHOD="POST",null==e&&(e={}),this.weightPathPrefix=e.weightPathPrefix,this.onProgress=e.onProgress,this.weightUrlConverter=e.weightUrlConverter,null!=e.fetchFunc?((0,o.a)("function"==typeof e.fetchFunc,(()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)")),this.fetch=e.fetchFunc):this.fetch=(0,r.e)().platform.fetch,(0,o.a)(null!=t&&t.length>0,(()=>"URL path for http must not be null, undefined or empty.")),Array.isArray(t)&&(0,o.a)(2===t.length,(()=>`URL paths for http must have a length of 2, (actual length is ${t.length}).`)),this.path=t,null!=e.requestInit&&null!=e.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=e.requestInit||{}}async save(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const e=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);e.body=new FormData;const n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],r=(0,i.b)(t,n);e.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=t.weightData&&e.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin");const o=await this.fetch(this.path,e);if(o.ok)return{modelArtifactsInfo:(0,i.c)(t),responses:[o]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${o.status}.`)}async load(){const t=await this.fetch(this.path,this.requestInit);if(!t.ok)throw new Error(`Request to ${this.path} failed with status code ${t.status}. Please verify this URL points to the model JSON of the model to load.`);let e;try{e=await t.json()}catch(t){let e=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?e+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":e+=" Please make sure the server is serving valid JSON for this request.",new Error(e)}const n=e.modelTopology,r=e.weightsManifest;if(null==n&&null==r)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return(0,i.e)(e,(t=>this.loadWeights(t)))}async loadWeights(t){const e=Array.isArray(this.path)?this.path[1]:this.path,[n,r]=function(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?");return[t.substring(0,e)+"/",n>e?t.substring(n):""]}(e),o=this.weightPathPrefix||n,s=[];for(const e of t)s.push(...e.weights);const l=[],u=[];for(const e of t)for(const t of e.paths)null!=this.weightUrlConverter?u.push(this.weightUrlConverter(t)):l.push(o+t+r);this.weightUrlConverter&&l.push(...await Promise.all(u));const h=await a(l,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress});return[s,(0,i.f)(h)]}}function c(t){return null!=t.match(h.URL_SCHEME_REGEX)}h.URL_SCHEME_REGEX=/^https?:\/\//;const f=(t,e)=>{if("undefined"==typeof fetch&&(null==e||null==e.fetchFunc))return null;{let n=!0;if(n=Array.isArray(t)?t.every((t=>c(t))):c(t),n)return d(t,e)}return null};function d(t,e){return new h(t,e)}function g(t,e){return d(t,e)}i.I.registerSaveRouter(f),i.I.registerLoadRouter(f)},9166:(t,e,n)=>{n.d(e,{s:()=>d}),n(5389),n(3807);var r=n(586),i=(0,r.a)((function(t){!function(t,e,n){function r(t){var e,n=this,r=(e=4022871197,function(t){t=t.toString();for(var n=0;n<t.length;n++){var r=.02519603282416938*(e+=t.charCodeAt(n));r-=e=r>>>0,e=(r*=e)>>>0,e+=4294967296*(r-=e)}return 2.3283064365386963e-10*(e>>>0)});n.next=function(){var t=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=t-(n.c=0|t)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(t),n.s0<0&&(n.s0+=1),n.s1-=r(t),n.s1<0&&(n.s1+=1),n.s2-=r(t),n.s2<0&&(n.s2+=1),r=null}function i(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function o(t,e){var n=new r(t),o=e&&e.state,s=n.next;return s.int32=function(){return 4294967296*n.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.alea=o}(r.c,t)})),o=(0,r.a)((function(t){!function(t,e,n){function r(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.xor128=o}(r.c,t)})),s=(0,r.a)((function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function i(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.xorwow=o}(r.c,t)})),a=(0,r.a)((function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n&&(r[7]=-1),t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}function i(t,e){return e.x=t.x.slice(),e.i=t.i,e}function o(t,e){null==t&&(t=+new Date);var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&(o.x&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.xorshift7=o}(r.c,t)})),l=(0,r.a)((function(t){!function(t,e,n){function r(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,s,a=[],l=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,l=Math.max(l,e.length)),i=0,o=-32;o<l;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(s=s+1640531527|0,i=0==(n=a[127&o]^=r+s)?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;t.w=s,t.X=a,t.i=i}(e,t)}function i(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function o(t,e){null==t&&(t=+new Date);var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&(o.X&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.xor4096=o}(r.c,t)})),u=(0,r.a)((function(t){!function(t,e,n){function r(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}function i(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function o(t,e){var n=new r(t),o=e&&e.state,s=function(){return(n.next()>>>0)/4294967296};return s.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},s.int32=n.next,s.quick=s,o&&("object"==typeof o&&i(o,n),s.state=function(){return i(n,{})}),s}e&&e.exports?e.exports=o:this.tychei=o}(r.c,t)})),h=Object.freeze({__proto__:null,default:{}}),c=(0,r.g)(h),f=(0,r.a)((function(t){!function(e,n){var r,i=this,o=256,s=n.pow(o,6),a=n.pow(2,52),l=2*a,u=255;function h(t,u,h){var c=[],y=p(g((u=1==u?{entropy:!0}:u||{}).entropy?[t,m(e)]:null==t?function(){try{var t;return r&&(t=r.randomBytes)?t=t(o):(t=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(t)),m(t)}catch(t){var n=i.navigator,s=n&&n.plugins;return[+new Date,i,s,i.screen,m(e)]}}():t,3),c),w=new f(c),v=function(){for(var t=w.g(6),e=s,n=0;t<a;)t=(t+n)*o,e*=o,n=w.g(1);for(;t>=l;)t/=2,e/=2,n>>>=1;return(t+n)/e};return v.int32=function(){return 0|w.g(4)},v.quick=function(){return w.g(4)/4294967296},v.double=v,p(m(w.S),e),(u.pass||h||function(t,e,r,i){return i&&(i.S&&d(i,w),t.state=function(){return d(w,{})}),r?(n.random=t,e):t})(v,y,"global"in u?u.global:this==n,u.state)}function f(t){var e,n=t.length,r=this,i=0,s=r.i=r.j=0,a=r.S=[];for(n||(t=[n++]);i<o;)a[i]=i++;for(i=0;i<o;i++)a[i]=a[s=u&s+t[i%n]+(e=a[i])],a[s]=e;(r.g=function(t){for(var e,n=0,i=r.i,s=r.j,a=r.S;t--;)e=a[i=u&i+1],n=n*o+a[u&(a[i]=a[s=u&s+e])+(a[s]=e)];return r.i=i,r.j=s,n})(o)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function g(t,e){var n,r=[],i=typeof t;if(e&&"object"==i)for(n in t)try{r.push(g(t[n],e-1))}catch(t){}return r.length?r:"string"==i?t:t+"\0"}function p(t,e){for(var n,r=t+"",i=0;i<r.length;)e[u&i]=u&(n^=19*e[u&i])+r.charCodeAt(i++);return m(e)}function m(t){return String.fromCharCode.apply(0,t)}if(n.seedrandom=h,p(n.random(),e),t.exports){t.exports=h;try{r=c}catch(t){}}}([],Math)}));f.alea=i,f.xor128=o,f.xorwow=s,f.xorshift7=a,f.xor4096=l,f.tychei=u;var d=f},3801:(t,e,n)=>{n.d(e,{L:()=>_,l:()=>r}),n(5389),n(3807);var r=o,i=null;try{i=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}function o(t,e,n){this.low=0|t,this.high=0|e,this.unsigned=!!n}function s(t){return!0===(t&&t.__isLong__)}o.prototype.__isLong__,Object.defineProperty(o.prototype,"__isLong__",{value:!0}),o.isLong=s;var a={},l={};function u(t,e){var n,r,i;return e?(i=0<=(t>>>=0)&&t<256)&&(r=l[t])?r:(n=c(t,(0|t)<0?-1:0,!0),i&&(l[t]=n),n):(i=-128<=(t|=0)&&t<128)&&(r=a[t])?r:(n=c(t,t<0?-1:0,!1),i&&(a[t]=n),n)}function h(t,e){if(isNaN(t))return e?b:v;if(e){if(t<0)return b;if(t>=m)return S}else{if(t<=-y)return I;if(t+1>=y)return M}return t<0?h(-t,e).neg():c(t%p|0,t/p|0,e)}function c(t,e,n){return new o(t,e,n)}o.fromInt=u,o.fromNumber=h,o.fromBits=c;var f=Math.pow;function d(t,e,n){if(0===t.length)throw Error("empty string");if("NaN"===t||"Infinity"===t||"+Infinity"===t||"-Infinity"===t)return v;if("number"==typeof e?(n=e,e=!1):e=!!e,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return d(t.substring(1),e,n).neg();for(var i=h(f(n,8)),o=v,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),l=parseInt(t.substring(s,s+a),n);if(a<8){var u=h(f(n,a));o=o.mul(u).add(h(l))}else o=(o=o.mul(i)).add(h(l))}return o.unsigned=e,o}function g(t,e){return"number"==typeof t?h(t,e):"string"==typeof t?d(t,e):c(t.low,t.high,"boolean"==typeof e?e:t.unsigned)}o.fromString=d,o.fromValue=g;var p=4294967296,m=p*p,y=m/2,w=u(1<<24),v=u(0);o.ZERO=v;var b=u(0,!0);o.UZERO=b;var x=u(1);o.ONE=x;var E=u(1,!0);o.UONE=E;var A=u(-1);o.NEG_ONE=A;var M=c(-1,2147483647,!1);o.MAX_VALUE=M;var S=c(-1,-1,!0);o.MAX_UNSIGNED_VALUE=S;var I=c(0,-2147483648,!1);o.MIN_VALUE=I;var T=o.prototype;T.toInt=function(){return this.unsigned?this.low>>>0:this.low},T.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},T.toString=function(t){if((t=t||10)<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(I)){var e=h(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}return"-"+this.neg().toString(t)}for(var i=h(f(t,6),this.unsigned),o=this,s="";;){var a=o.div(i),l=(o.sub(a.mul(i)).toInt()>>>0).toString(t);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},T.getHighBits=function(){return this.high},T.getHighBitsUnsigned=function(){return this.high>>>0},T.getLowBits=function(){return this.low},T.getLowBitsUnsigned=function(){return this.low>>>0},T.getNumBitsAbs=function(){if(this.isNegative())return this.eq(I)?64:this.neg().getNumBitsAbs();for(var t=0!=this.high?this.high:this.low,e=31;e>0&&0==(t&1<<e);e--);return 0!=this.high?e+33:e+1},T.isZero=function(){return 0===this.high&&0===this.low},T.eqz=T.isZero,T.isNegative=function(){return!this.unsigned&&this.high<0},T.isPositive=function(){return this.unsigned||this.high>=0},T.isOdd=function(){return 1==(1&this.low)},T.isEven=function(){return 0==(1&this.low)},T.equals=function(t){return s(t)||(t=g(t)),(this.unsigned===t.unsigned||this.high>>>31!=1||t.high>>>31!=1)&&this.high===t.high&&this.low===t.low},T.eq=T.equals,T.notEquals=function(t){return!this.eq(t)},T.neq=T.notEquals,T.ne=T.notEquals,T.lessThan=function(t){return this.comp(t)<0},T.lt=T.lessThan,T.lessThanOrEqual=function(t){return this.comp(t)<=0},T.lte=T.lessThanOrEqual,T.le=T.lessThanOrEqual,T.greaterThan=function(t){return this.comp(t)>0},T.gt=T.greaterThan,T.greaterThanOrEqual=function(t){return this.comp(t)>=0},T.gte=T.greaterThanOrEqual,T.ge=T.greaterThanOrEqual,T.compare=function(t){if(s(t)||(t=g(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},T.comp=T.compare,T.negate=function(){return!this.unsigned&&this.eq(I)?I:this.not().add(x)},T.neg=T.negate,T.add=function(t){s(t)||(t=g(t));var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=t.high>>>16,a=65535&t.high,l=t.low>>>16,u=0,h=0,f=0,d=0;return f+=(d+=i+(65535&t.low))>>>16,h+=(f+=r+l)>>>16,u+=(h+=n+a)>>>16,u+=e+o,c((f&=65535)<<16|(d&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},T.subtract=function(t){return s(t)||(t=g(t)),this.add(t.neg())},T.sub=T.subtract,T.multiply=function(t){if(this.isZero())return v;if(s(t)||(t=g(t)),i)return c(i.mul(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned);if(t.isZero())return v;if(this.eq(I))return t.isOdd()?I:v;if(t.eq(I))return this.isOdd()?I:v;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(w)&&t.lt(w))return h(this.toNumber()*t.toNumber(),this.unsigned);var e=this.high>>>16,n=65535&this.high,r=this.low>>>16,o=65535&this.low,a=t.high>>>16,l=65535&t.high,u=t.low>>>16,f=65535&t.low,d=0,p=0,m=0,y=0;return m+=(y+=o*f)>>>16,p+=(m+=r*f)>>>16,m&=65535,p+=(m+=o*u)>>>16,d+=(p+=n*f)>>>16,p&=65535,d+=(p+=r*u)>>>16,p&=65535,d+=(p+=o*l)>>>16,d+=e*f+n*u+r*l+o*a,c((m&=65535)<<16|(y&=65535),(d&=65535)<<16|(p&=65535),this.unsigned)},T.mul=T.multiply,T.divide=function(t){if(s(t)||(t=g(t)),t.isZero())throw Error("division by zero");var e,n,r;if(i)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?c((this.unsigned?i.div_u:i.div_s)(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:v;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return b;if(t.gt(this.shru(1)))return E;r=b}else{if(this.eq(I))return t.eq(x)||t.eq(A)?I:t.eq(I)?x:(e=this.shr(1).div(t).shl(1)).eq(v)?t.isNegative()?x:A:(n=this.sub(t.mul(e)),r=e.add(n.div(t)));if(t.eq(I))return this.unsigned?b:v;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();r=v}for(n=this;n.gte(t);){e=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var o=Math.ceil(Math.log(e)/Math.LN2),a=o<=48?1:f(2,o-48),l=h(e),u=l.mul(t);u.isNegative()||u.gt(n);)u=(l=h(e-=a,this.unsigned)).mul(t);l.isZero()&&(l=x),r=r.add(l),n=n.sub(u)}return r},T.div=T.divide,T.modulo=function(t){return s(t)||(t=g(t)),i?c((this.unsigned?i.rem_u:i.rem_s)(this.low,this.high,t.low,t.high),i.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},T.mod=T.modulo,T.rem=T.modulo,T.not=function(){return c(~this.low,~this.high,this.unsigned)},T.and=function(t){return s(t)||(t=g(t)),c(this.low&t.low,this.high&t.high,this.unsigned)},T.or=function(t){return s(t)||(t=g(t)),c(this.low|t.low,this.high|t.high,this.unsigned)},T.xor=function(t){return s(t)||(t=g(t)),c(this.low^t.low,this.high^t.high,this.unsigned)},T.shiftLeft=function(t){return s(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):c(0,this.low<<t-32,this.unsigned)},T.shl=T.shiftLeft,T.shiftRight=function(t){return s(t)&&(t=t.toInt()),0==(t&=63)?this:t<32?c(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):c(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},T.shr=T.shiftRight,T.shiftRightUnsigned=function(t){if(s(t)&&(t=t.toInt()),0==(t&=63))return this;var e=this.high;return t<32?c(this.low>>>t|e<<32-t,e>>>t,this.unsigned):c(32===t?e:e>>>t-32,0,this.unsigned)},T.shru=T.shiftRightUnsigned,T.shr_u=T.shiftRightUnsigned,T.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},T.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},T.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},T.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},T.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},o.fromBytes=function(t,e,n){return n?o.fromBytesLE(t,e):o.fromBytesBE(t,e)},o.fromBytesLE=function(t,e){return new o(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},o.fromBytesBE=function(t,e){return new o(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)};var _=Object.freeze(Object.assign(Object.create(null),r,{default:r}))},3687:(t,e,n)=>{n.d(e,{a:()=>w,b:()=>y,d:()=>a,e:()=>o,k:()=>l,l:()=>u,n:()=>m,r:()=>h,s:()=>f,t:()=>s,w:()=>d,z:()=>c}),n(5389),n(3807);var r=n(198),i=n(3077);function o(){return r.E}function s(t,e){return r.E.tidy(t,e)}function a(t){(0,r.bS)(t).forEach((t=>t.dispose()))}function l(t){return r.E.keep(t)}function u(t){return r.E.setBackend(t)}function h(t,e,n=1){return r.E.registerBackend(t,e,n)}function c(t,e="float32"){if("complex64"===e){const e=c(t,"float32"),n=c(t,"float32");return(0,r.g)(e,n)}const n=(0,i.Q)((0,i.s)(t),e);return r.E.makeTensor(n,t,e)}function f(t,e){if(((0,i.H)(t)&&"string"!==e||Array.isArray(t))&&"complex64"!==e)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===e&&(0,i.H)(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return(0,r.bi)(t,[],[],e)}function d(t,e){const n=[];for(let t=0;t<e.length;t++)e[t]&&n.push(t);const i=(0,r.n)(t,"int32"),o=(0,r.n)([n.length,t.length],"int32");for(let e=0;e<n.length;e++){const r=i.indexToLoc(n[e]),s=e*t.length;o.values.set(r,s)}return o.toTensor()}function g(t,e,n){const r=function(t,e,n){return function(t,e,n){let r=0,i=t.length,o=0,s=!1;for(;r<i;){o=r+(i-r>>>1);const a=n(e,t[o]);a>0?r=o+1:(i=o,s=!a)}return s?r:-r-1}(t,e,n||p)}(t,e,n),i=r<0?-(r+1):r;t.splice(i,0,e)}function p(t,e){return t>e?1:t<e?-1:0}function m(t,e,n,r,i){return v(t,e,n,r,i,0)}function y(t,e,n,r,i,o){return v(t,e,n,r,i,0,!1,o,!0)}function w(t,e,n,r,i,o){return v(t,e,n,r,i,o,!0)}function v(t,e,n,r,i,o,s=!1,a=!1,l=!1){const u=[];for(let t=0;t<e.length;t++)e[t]>i&&u.push({score:e[t],boxIndex:t,suppressBeginIndex:0});u.sort(E);const h=o>0?-.5/o:0,c=[],f=[];for(;c.length<n&&u.length>0;){const e=u.pop(),{score:n,boxIndex:o,suppressBeginIndex:s}=e;if(n<i)break;let a=!1;for(let n=c.length-1;n>=s;--n){const s=b(t,o,c[n]);if(s>=r){a=!0;break}if(e.score=e.score*x(r,h,s),e.score<=i)break}e.suppressBeginIndex=c.length,a||(e.score===n?(c.push(o),f.push(e.score)):e.score>i&&g(u,e,E))}const d=c.length,p=n-d;a&&p>0&&(c.push(...new Array(p).fill(0)),f.push(...new Array(p).fill(0)));const m={selectedIndices:c};return s&&(m.selectedScores=f),l&&(m.validOutputs=d),m}function b(t,e,n){const r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),h=Math.min(i[1],i[3]),c=Math.max(i[0],i[2]),f=Math.max(i[1],i[3]),d=(a-o)*(l-s),g=(c-u)*(f-h);if(d<=0||g<=0)return 0;const p=Math.max(o,u),m=Math.max(s,h),y=Math.min(a,c),w=Math.min(l,f),v=Math.max(y-p,0)*Math.max(w-m,0);return v/(d+g-v)}function x(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function E(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}},3077:(t,e,n)=>{function r(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,a(t,e,n)}function i(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,a(t,n,r),a(e,n,r)}function o(t,e,n){return Math.max(t,Math.min(e,n))}function s(t){return t%2==0?t:t+1}function a(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function l(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function u(t,e){const n=Math.random();return e*n+(1-n)*t}function h(t,e){let n=0;for(let r=0;r<t.length;r++){const i=Number(t[r])-Number(e[r]);n+=i*i}return n}function c(t,e){if(!t)throw new Error("string"==typeof e?e:e())}function f(t,e,n=""){c(y(t,e),(()=>n+` Shapes ${t} and ${e} must match`))}function d(t){c(null!=t,(()=>"The input to the tensor constructor must be a non-null value."))}function g(t,e=[],n=!1){if(null==e&&(e=[]),Array.isArray(t)||C(t)&&!n)for(let r=0;r<t.length;++r)g(t[r],e,n);else e.push(t);return e}function p(t){if(0===t.length)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function m(t){return 0===t.length}function y(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function w(t){return t%1==0}function v(t){if(null!=Math.tanh)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function b(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function x(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return r(e),e}function E(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function A(t,e=(t=>0),n){return new Promise(((r,i)=>{let o=0;const s=()=>{if(t())return void r();o++;const a=e(o);null!=n&&o>=n?i():setTimeout(s,a)};s()}))}function M(t,e){let n=1,r=-1;for(let e=0;e<t.length;++e)if(t[e]>=0)n*=t[e];else if(-1===t[e]){if(-1!==r)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${e}`);r=e}else if(t[e]<0)throw Error(`Shapes can not be < 0. Found ${t[e]} at dim ${e}`);if(-1===r){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(0===n)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!=0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const i=t.slice();return i[r]=e/n,i}function S(t,e){const n=e.length;return c((t=null==t?e.map(((t,e)=>e)):[].concat(t)).every((t=>t>=-n&&t<n)),(()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`)),c(t.every((t=>w(t))),(()=>`All values in axis param must be integers but got axis ${t}`)),t.map((t=>t<0?n+t:t))}function I(t,e){const n=[],r=[],i=null!=e&&Array.isArray(e)&&0===e.length,o=null==e||i?null:S(e,t).sort();let s=0;for(let e=0;e<t.length;++e){if(null!=o){if(o[s]===e&&1!==t[e])throw new Error(`Can't squeeze axis ${e} since its dim '${t[e]}' is not 1`);(null==o[s]||o[s]>e)&&1===t[e]&&(n.push(t[e]),r.push(e)),o[s]<=e&&s++}1!==t[e]&&(n.push(t[e]),r.push(e))}return{newShape:n,keptDims:r}}function T(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else{if("bool"!==t)throw new Error(`Unknown data type ${t}`);n=new Uint8Array(e)}return n}function _(t,e){let n=null;if(null==t||"float32"===t)n=new Float32Array(e);else if("int32"===t)n=new Int32Array(e);else if("bool"===t)n=new Uint8Array(e);else{if("string"!==t)throw new Error(`Unknown data type ${t}`);n=new Array(e)}return n}function O(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function k(t){return"bool"===t||"complex64"===t||"float32"===t||"int32"===t||"string"===t}function R(t,e){return!("complex64"===e||"float32"===e&&"complex64"!==t||"int32"===e&&"float32"!==t&&"complex64"!==t||"bool"===e&&"bool"===t)}function C(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}function B(t){if("float32"===t||"int32"===t)return 4;if("complex64"===t)return 8;if("bool"===t)return 1;throw new Error(`Unknown dtype ${t}`)}function P(t){if(null==t)return 0;let e=0;return t.forEach((t=>e+=t.length)),e}function F(t){return"string"==typeof t||t instanceof String}function j(t){return"boolean"==typeof t}function N(t){return"number"==typeof t}function L(t){return Array.isArray(t)?L(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":N(t)?"float32":F(t)?"string":j(t)?"bool":"float32"}function D(t){return!!(t&&t.constructor&&t.call&&t.apply)}function U(t,e){for(let n=e;n<t;++n)if(t%n==0)return n;return t}function $(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function z(t,e,n,r=!1){const i=new Array;if(1===e.length){const o=e[0]*(r?2:1);for(let e=0;e<o;e++)i[e]=n[t+e]}else{const o=e[0],s=e.slice(1),a=s.reduce(((t,e)=>t*e))*(r?2:1);for(let e=0;e<o;e++)i[e]=z(t+e*a,s,n,r)}return i}function H(t,e,n=!1){if(0===t.length)return e[0];const r=t.reduce(((t,e)=>t*e))*(n?2:1);if(0===r)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return z(0,t,e,n)}function q(t,e){const n=W(t,e);for(let t=0;t<n.length;t++)n[t]=1;return n}function W(t,e){if(null==e||"float32"===e||"complex64"===e)return new Float32Array(t);if("int32"===e)return new Int32Array(t);if("bool"===e)return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function V(t,e){const n=t.reduce(((t,e)=>t*e),1);if(null==e||"float32"===e)return H(t,new Float32Array(n));if("int32"===e)return H(t,new Int32Array(n));if("bool"===e)return H(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function G(t){t.forEach((e=>{c(Number.isInteger(e)&&e>=0,(()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`))}))}function J(t,e,n){if(0===e)return 0;if(1===e)return t[0];let r=t[t.length-1];for(let e=0;e<t.length-1;++e)r+=n[e]*t[e];return r}function X(t,e,n){if(0===e)return[];if(1===e)return[t];const r=new Array(e);for(let e=0;e<r.length-1;++e)r[e]=Math.floor(t/n[e]),t-=r[e]*n[e];return r[r.length-1]=t,r}function K(t){return t&&t.then&&"function"==typeof t.then}n.d(e,{A:()=>E,B:()=>A,C:()=>M,D:()=>T,E:()=>_,F:()=>k,G:()=>R,H:()=>C,I:()=>B,J:()=>P,K:()=>F,L:()=>j,M:()=>N,N:()=>L,O:()=>U,P:()=>$,Q:()=>W,R:()=>V,S:()=>G,T:()=>J,U:()=>X,a:()=>c,b:()=>y,c:()=>w,d:()=>D,e:()=>f,f:()=>I,g:()=>d,h:()=>g,i:()=>K,j:()=>O,k:()=>r,l:()=>i,m:()=>q,n:()=>o,o:()=>s,p:()=>S,q:()=>a,r:()=>l,s:()=>p,t:()=>H,u:()=>u,v:()=>h,w:()=>m,x:()=>v,y:()=>b,z:()=>x}),n(5389),n(3807)},765:(t,e,n)=>{var r=n(2692),i=(n(1026),n(5389),n(3807),n(586));(function(){var t;function e(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){return t==Array.prototype||t==Object.prototype||(t[e]=n.value),t},r=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof i.c&&i.c];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function o(t,e){if(e)t:{var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];if(!(s in i))break t;i=i[s]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}function s(t){return(t={next:t})[Symbol.iterator]=function(){return this},t}function a(t){var n="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return n?n.call(t):{next:e(t)}}function l(t){if(!(t instanceof Array)){t=a(t);for(var e,n=[];!(e=t.next()).done;)n.push(e.value);t=n}return t}o("Symbol",(function(t){function e(t,e){this.g=t,n(this,"description",{configurable:!0,writable:!0,value:e})}if(t)return t;e.prototype.toString=function(){return this.g};var r="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function t(n){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new e(r+(n||"")+"_"+i++,n)}})),o("Symbol.iterator",(function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<i.length;o++){var a=r[i[o]];"function"==typeof a&&"function"!=typeof a.prototype[t]&&n(a.prototype,t,{configurable:!0,writable:!0,value:function(){return s(e(this))}})}return t}));var u,h="function"==typeof Object.create?Object.create:function(t){function e(){}return e.prototype=t,new e};if("function"==typeof Object.setPrototypeOf)u=Object.setPrototypeOf;else{var c;t:{var f={};try{f.__proto__={a:!0},c=f.a;break t}catch(t){}c=!1}u=c?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var d=u;function g(t,e){if(t.prototype=h(e.prototype),t.prototype.constructor=t,d)d(t,e);else for(var n in e)if("prototype"!=n)if(Object.defineProperties){var r=Object.getOwnPropertyDescriptor(e,n);r&&Object.defineProperty(t,n,r)}else t[n]=e[n];t.da=e.prototype}function p(){this.l=!1,this.i=null,this.h=void 0,this.g=1,this.s=this.m=0,this.j=null}function m(t){if(t.l)throw new TypeError("Generator is already running");t.l=!0}function y(t,e){t.j={U:e,V:!0},t.g=t.m||t.s}function w(t,e,n){return t.g=n,{value:e}}function v(t){this.g=new p,this.h=t}function b(t,e,n,r){try{var i=e.call(t.g.i,n);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.g.l=!1,i;var o=i.value}catch(e){return t.g.i=null,y(t.g,e),x(t)}return t.g.i=null,r.call(t.g,o),x(t)}function x(t){for(;t.g.g;)try{var e=t.h(t.g);if(e)return t.g.l=!1,{value:e.value,done:!1}}catch(e){t.g.h=void 0,y(t.g,e)}if(t.g.l=!1,t.g.j){if(e=t.g.j,t.g.j=null,e.V)throw e.U;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function E(t){this.next=function(e){return m(t.g),t.g.i?e=b(t,t.g.i.next,e,t.g.o):(t.g.o(e),e=x(t)),e},this.throw=function(e){return m(t.g),t.g.i?e=b(t,t.g.i.throw,e,t.g.o):(y(t.g,e),e=x(t)),e},this.return=function(e){return function(t,e){m(t.g);var n=t.g.i;return n?b(t,"return"in n?n.return:function(t){return{value:t,done:!0}},e,t.g.return):(t.g.return(e),x(t))}(t,e)},this[Symbol.iterator]=function(){return this}}function A(t){return function(t){function e(e){return t.next(e)}function n(e){return t.throw(e)}return new Promise((function(r,i){!function t(o){o.done?r(o.value):Promise.resolve(o.value).then(e,n).then(t,i)}(t.next())}))}(new E(new v(t)))}p.prototype.o=function(t){this.h=t},p.prototype.return=function(t){this.j={return:t},this.g=this.s},o("Promise",(function(t){function e(t){this.h=0,this.i=void 0,this.g=[],this.o=!1;var e=this.j();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.g=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.h=function(t){if(null==this.g){this.g=[];var e=this;this.i((function(){e.l()}))}this.g.push(t)};var o=r.setTimeout;n.prototype.i=function(t){o(t,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var t=this.g;this.g=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.j(t)}}}this.g=null},n.prototype.j=function(t){this.i((function(){throw t}))},e.prototype.j=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.C),reject:t(this.l)}},e.prototype.C=function(t){if(t===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.F(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.m(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.l(t)}"function"==typeof e?this.G(e,t):this.m(t)},e.prototype.l=function(t){this.s(2,t)},e.prototype.m=function(t){this.s(1,t)},e.prototype.s=function(t,e){if(0!=this.h)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.h);this.h=t,this.i=e,2===this.h&&this.D(),this.A()},e.prototype.D=function(){var t=this;o((function(){if(t.B()){var e=r.console;void 0!==e&&e.error(t.i)}}),1)},e.prototype.B=function(){if(this.o)return!1;var t=r.CustomEvent,e=r.Event,n=r.dispatchEvent;return void 0===n||("function"==typeof t?t=new t("unhandledrejection",{cancelable:!0}):"function"==typeof e?t=new e("unhandledrejection",{cancelable:!0}):(t=r.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,t),t.promise=this,t.reason=this.i,n(t))},e.prototype.A=function(){if(null!=this.g){for(var t=0;t<this.g.length;++t)s.h(this.g[t]);this.g=null}};var s=new n;return e.prototype.F=function(t){var e=this.j();t.J(e.resolve,e.reject)},e.prototype.G=function(t,e){var n=this.j();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.J(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.J=function(t,e){function n(){switch(r.h){case 1:t(r.i);break;case 2:e(r.i);break;default:throw Error("Unexpected state: "+r.h)}}var r=this;null==this.g?s.h(n):this.g.push(n),this.o=!0},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=a(t),o=r.next();!o.done;o=r.next())i(o.value).J(e,n)}))},e.all=function(t){var n=a(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).J(o(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var M="function"==typeof Object.assign?Object.assign:function(t,e){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t};o("Object.assign",(function(t){return t||M})),o("Object.is",(function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}})),o("Array.prototype.includes",(function(t){return t||function(t,e){var n=this;n instanceof String&&(n=String(n));var r=n.length;for(0>(e=e||0)&&(e=Math.max(e+r,0));e<r;e++){var i=n[e];if(i===t||Object.is(i,t))return!0}return!1}})),o("String.prototype.includes",(function(t){return t||function(t,e){if(null==this)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return-1!==this.indexOf(t,e||0)}})),o("Array.prototype.keys",(function(t){return t||function(){return function(t,e){t instanceof String&&(t+="");var n=0,r=!1,i={next:function(){if(!r&&n<t.length){var i=n++;return{value:e(i,t[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,(function(t){return t}))}}));var S=this||self;function I(t,e){t=t.split(".");var n,r=S;t[0]in r||void 0===r.execScript||r.execScript("var "+t[0]);for(;t.length&&(n=t.shift());)t.length||void 0===e?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=e}function T(t){!function(t){S.setTimeout((function(){throw t}),0)}(t)}function _(t,e){T(Error("Invalid wire type: "+t+" (at position "+e+")"))}function O(){T(Error("Failed to read varint, encoding is invalid."))}function k(t,e){return e=String.fromCharCode.apply(null,e),null==t?e:t+e}var R,C,B="undefined"!=typeof TextDecoder,P="undefined"!=typeof TextEncoder;function F(t){if(P)t=(C||(C=new TextEncoder)).encode(t);else{var e=void 0;e=void 0!==e&&e;for(var n=0,r=new Uint8Array(3*t.length),i=0;i<t.length;i++){var o=t.charCodeAt(i);if(128>o)r[n++]=o;else{if(2048>o)r[n++]=o>>6|192;else{if(55296<=o&&57343>=o){if(56319>=o&&i<t.length){var s=t.charCodeAt(++i);if(56320<=s&&57343>=s){o=1024*(o-55296)+s-56320+65536,r[n++]=o>>18|240,r[n++]=o>>12&63|128,r[n++]=o>>6&63|128,r[n++]=63&o|128;continue}i--}if(e)throw Error("Found an unpaired surrogate");o=65533}r[n++]=o>>12|224,r[n++]=o>>6&63|128}r[n++]=63&o|128}}t=r.subarray(0,n)}return t}var j={},N=null;function L(t){var e;void 0===e&&(e=0),U(),e=j[e];for(var n=Array(Math.floor(t.length/3)),r=e[64]||"",i=0,o=0;i<t.length-2;i+=3){var s=t[i],a=t[i+1],l=t[i+2],u=e[s>>2];s=e[(3&s)<<4|a>>4],a=e[(15&a)<<2|l>>6],l=e[63&l],n[o++]=u+s+a+l}switch(u=0,l=r,t.length-i){case 2:l=e[(15&(u=t[i+1]))<<2]||r;case 1:t=t[i],n[o]=e[t>>2]+e[(3&t)<<4|u>>4]+l+r}return n.join("")}function D(t){var e=t.length,n=3*e/4;n%3?n=Math.floor(n):-1!="=.".indexOf(t[e-1])&&(n=-1!="=.".indexOf(t[e-2])?n-2:n-1);var r=new Uint8Array(n),i=0;return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=N[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}U();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){r[i++]=t})),r.subarray(0,i)}function U(){if(!N){N={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++){var r=t.concat(e[n].split(""));j[n]=r;for(var i=0;i<r.length;i++){var o=r[i];void 0===N[o]&&(N[o]=i)}}}}var $,z="function"==typeof Uint8Array;function H(t){if(this.g=t,null!==t&&0===t.length)throw Error("ByteString should be constructed with non-empty values")}H.prototype.toJSON=function(){if(null==this.g)var t="";else t=this.g,t=this.g=null==t||"string"==typeof t?t:z&&t instanceof Uint8Array?L(t):null;return t};var q="function"==typeof Uint8Array.prototype.slice;function W(t,e,n){return e===n?$||($=new Uint8Array(0)):q?t.slice(e,n):new Uint8Array(t.subarray(e,n))}var V=0;function G(t,e){e=void 0!==(e=void 0===e?{}:e).u&&e.u,this.h=null,this.g=this.i=this.l=0,this.j=!1,this.u=e,t&&J(this,t)}function J(t,e){t.h=function(t){if(t.constructor===Uint8Array)return t;if(t.constructor===ArrayBuffer)return new Uint8Array(t);if(t.constructor===Array)return new Uint8Array(t);if(t.constructor===String)return D(t);if(t.constructor===H){if(null==t.g)var e=$||($=new Uint8Array(0));else{e=Uint8Array;var n=t.g;n=null==n||z&&null!=n&&n instanceof Uint8Array?n:"string"==typeof n?D(n):null,e=new e(t=t.g=n)}return e}if(t instanceof Uint8Array)return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, or Array of numbers")}(e),t.l=0,t.i=t.h.length,t.g=t.l}function X(t){t.g>t.i&&(t.j=!0,T(Error("Tried to read past the end of the data "+t.g+" > "+t.i)))}function K(t){var e=t.h,n=e[t.g],r=127&n;return 128>n?(t.g+=1,X(t),r):(r|=(127&(n=e[t.g+1]))<<7,128>n?(t.g+=2,X(t),r):(r|=(127&(n=e[t.g+2]))<<14,128>n?(t.g+=3,X(t),r):(r|=(127&(n=e[t.g+3]))<<21,128>n?(t.g+=4,X(t),r):(r|=(15&(n=e[t.g+4]))<<28,128>n?(t.g+=5,X(t),r>>>0):(t.g+=5,128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]&&128<=e[t.g++]?(t.j=!0,O(),r):(X(t),r))))))}G.prototype.reset=function(){this.g=this.l};var Y=[];function Z(){this.g=new Uint8Array(64),this.h=0}function Q(t,e){if(!(t.h+1<t.g.length)){var n=t.g;t.g=new Uint8Array(Math.ceil(1+2*t.g.length)),t.g.set(n)}t.g[t.h++]=e}function tt(t,e){for(;127<e;)Q(t,127&e|128),e>>>=7;Q(t,e)}function et(t){var e={},n=void 0!==e.N&&e.N;this.m={u:void 0!==e.u&&e.u},this.N=n,e=this.m,Y.length?(n=Y.pop(),e&&(n.u=e.u),t&&J(n,t),t=n):t=new G(t,e),this.g=t,this.l=this.g.g,this.h=this.i=-1,this.j=!1}function nt(t){var e=t.g;if((e=e.g==e.i)||(e=t.j)||(e=(e=t.g).j||0>e.g||e.g>e.i),e)return!1;t.l=t.g.g;var n=K(t.g);return e=n>>>3,0<=(n&=7)&&5>=n?(t.i=e,t.h=n,!0):(t.j=!0,_(n,t.l),!1)}function rt(t){switch(t.h){case 0:if(0!=t.h)rt(t);else t:{for(var e=(t=t.g).g,n=0;10>n;n++){if(0==(128&t.h[e])){t.g=e+1,X(t);break t}e++}t.j=!0,O()}break;case 1:(t=t.g).g+=8,X(t);break;case 2:2!=t.h?rt(t):(e=K(t.g),(t=t.g).g+=e,X(t));break;case 5:(t=t.g).g+=4,X(t);break;case 3:for(e=t.i;;){if(!nt(t)){t.j=!0,T(Error("Unmatched start-group tag: stream EOF"));break}if(4==t.h){t.i!=e&&(t.j=!0,T(Error("Unmatched end-group tag")));break}rt(t)}break;default:t.j=!0,_(t.h,t.l)}}function it(t,e,n){t.N||(t=W(t.g.h,n,t.g.g),(n=e.m)?n.push(t):e.m=[t])}Z.prototype.length=function(){return this.h},Z.prototype.end=function(){var t=this.g,e=this.h;return this.h=0,W(t,0,e)},et.prototype.reset=function(){this.g.reset(),this.h=this.i=-1};var ot=[];function st(){this.h=[],this.i=0,this.g=new Z}function at(t,e){0!==e.length&&(t.h.push(e),t.i+=e.length)}function lt(t,e,n){tt(t.g,8*e+2),tt(t.g,n.length),at(t,t.g.end()),at(t,n)}var ut,ht="function"==typeof Symbol&&"symbol"==typeof Symbol()?Symbol(void 0):void 0;function ct(t,e){Object.isFrozen(t)||(ht?t[ht]|=e:void 0!==t.g?t.g|=e:Object.defineProperties(t,{g:{value:e,configurable:!0,writable:!0,enumerable:!1}}))}function ft(t){return t?null==(e=ht?t[ht]:t.g)?0:e:0;var e}function dt(t){return Array.isArray(t)?(ct(t,1),t):t}function gt(t){if(!Array.isArray(t))throw Error("cannot mark non-array as immutable");ct(t,2)}function pt(t){return null!==t&&"object"==typeof t&&t.constructor===Object}function mt(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":return z&&null!=t&&t instanceof Uint8Array?L(t):t;default:return t}}function yt(t,e){if(null!=t)return Array.isArray(t)||pt(t)?wt(t,e):e(t)}function wt(t,e){if(Array.isArray(t)){for(var n=Array(t.length),r=0;r<t.length;r++)n[r]=yt(t[r],e);return 1&ft(t)&&dt(n),n}for(r in n={},t)n[r]=yt(t[r],e);return n}function vt(t,e,n){var r=ut;if(ut=null,t||(t=r),r=this.constructor.ba,t||(t=r?[r]:[]),this.j=(r?0:-1)-(this.constructor.$||0),this.i=null,this.g=t,t=(r=this.g.length)-1,r&&pt(r=this.g[t])?(this.l=t-this.j,this.h=r):void 0!==e&&-1<e?(this.l=Math.max(e,t+1-this.j),this.h=null):this.l=Number.MAX_VALUE,n)for(e=0;e<n.length;e++)(t=n[e])<this.l?(t+=this.j,(r=this.g[t])?dt(r):this.g[t]=Et):(At(this),(r=this.h[t])?dt(r):this.h[t]=Et)}var bt,xt,Et=Object.freeze(dt([]));function At(t){var e=t.l+t.j;t.g[e]||(t.h=t.g[e]={})}function Mt(t,e,n){return-1===e?null:void 0!==n&&n||e>=t.l?t.h?t.h[e]:void 0:t.g[e+t.j]}function St(t,e,n){n=void 0===n||n;var r=void 0!==r&&r,i=Mt(t,e,r);return null==i&&(i=Et),i===Et?Tt(t,e,i=dt([]),r):n&&Array.isArray(i)&&2&ft(i)&&Tt(t,e,i=i.slice(),r),i}function It(t,e,n){return null==(t=null==(t=Mt(t,e))?t:+t)?void 0===n?0:n:t}function Tt(t,e,n,r){void 0!==r&&r||e>=t.l?(At(t),t.h[e]=n):t.g[e+t.j]=n}function _t(t,e,n){t.i||(t.i={});var r=t.i[n];if(!r){var i=St(t,n,!1);r=[];for(var o=!!Array.isArray(i)&&!!(2&ft(i)),s=0;s<i.length;s++)r[s]=new e(i[s]),o&&gt(r[s].g);o&&(gt(r),Object.freeze(r)),t.i[n]=r}return r}function Ot(t,e,n,r,i){var o=_t(t,r,e);n=n||new r,t=St(t,e),null!=i?(o.splice(i,0,n),t.splice(i,0,kt(n))):(o.push(n),t.push(kt(n)))}function kt(t){if(t.i)for(var e in t.i){var n=t.i[e];if(Array.isArray(n))for(var r=0;r<n.length;r++)n[r]&&kt(n[r]);else n&&kt(n)}return t.g}function Rt(t,e){return null==(t=Mt(t,e))?0:t}function Ct(t,e){return null==(t=Mt(t,e))?"":t}function Bt(t,e){if(t=t.m){at(e,e.g.end());for(var n=0;n<t.length;n++)at(e,t[n])}}function Pt(t){var e=t[0];switch(t.length){case 2:var n=t[1];return function(t,r,i){return e(t,r,i,n)};case 3:var r=t[1],i=t[2];return function(t,n,o){return e(t,n,o,r,i)};case 4:var o=t[1],s=t[2],a=t[3];return function(t,n,r){return e(t,n,r,o,s,a)};default:throw Error("unsupported number of parameters, expected [2-4], got "+t.length)}}function Ft(t,e,n){for(;nt(e)&&4!=e.h;){var r=e.i,i=n[r];if(i){if(Array.isArray(i)&&(i=n[r]=Pt(i)),!i(e,t,r)){i=t;var o=(r=e).l;rt(r),it(r,i,o)}}else i=t,o=(r=e).l,rt(r),it(r,i,o)}return t}function jt(t,e){var n=new st;if(e(t,n),0===(t=n.i+n.g.length()))n=new Uint8Array(0);else{t=new Uint8Array(t);for(var r=n.h,i=r.length,o=e=0;o<i;o++){var s=r[o];0!==s.length&&(t.set(s,e),e+=s.length)}0!==(i=(r=n.g).h)&&(t.set(r.g.subarray(0,i),e),r.h=0),n.h=[t],n=t}return n}function Nt(t,e,n){if(ot.length){var r=ot.pop();t&&(J(r.g,t),r.i=-1,r.h=-1),t=r}else t=new et(t);try{return n(new e,t)}finally{(e=t.g).h=null,e.l=0,e.i=0,e.g=0,e.j=!1,e.u=!1,t.i=-1,t.h=-1,t.j=!1,100>ot.length&&ot.push(t)}}function Lt(t,e,n){if(null!=(e=Mt(e,n))){tt(t.g,8*n+5),t=t.g;var r=e;0===(r=(n=0>r?1:0)?-r:r)?V=0<1/r?0:2147483648:isNaN(r)?V=2147483647:34028234663852886e22<r?V=(n<<31|2139095040)>>>0:11754943508222875e-54>r?(r=Math.round(r/Math.pow(2,-149)),V=(n<<31|r)>>>0):(e=Math.floor(Math.log(r)/Math.LN2),r*=Math.pow(2,-e),16777216<=(r=Math.round(8388608*r))&&++e,V=(n<<31|e+127<<23|8388607&r)>>>0),Q(t,(n=V)>>>0&255),Q(t,n>>>8&255),Q(t,n>>>16&255),Q(t,n>>>24&255)}}function Dt(t,e,n){if(5!==t.h)return!1;var r=(t=t.g).h[t.g],i=t.h[t.g+1],o=t.h[t.g+2],s=t.h[t.g+3];return t.g+=4,X(t),t=2*((i=(r<<0|i<<8|o<<16|s<<24)>>>0)>>31)+1,r=i>>>23&255,i&=8388607,Tt(e,n,255==r?i?NaN:1/0*t:0==r?t*Math.pow(2,-149)*i:t*Math.pow(2,r-150)*(i+Math.pow(2,23))),!0}function Ut(t,e,n){if(0!==t.h)return!1;for(var r=t.g,i=128,o=0,s=t=0;4>s&&128<=i;s++)o|=(127&(i=r.h[r.g++]))<<7*s;if(128<=i&&(o|=(127&(i=r.h[r.g++]))<<28,t|=(127&i)>>4),128<=i)for(s=0;5>s&&128<=i;s++)t|=(127&(i=r.h[r.g++]))<<7*s+3;return 128>i?(r=o>>>0,(t=2147483648&(i=t>>>0))&&(i=~i>>>0,0==(r=1+~r>>>0)&&(i=i+1>>>0)),r=4294967296*i+(r>>>0),t=t?-r:r):(r.j=!0,O(),t=void 0),Tt(e,n,t),!0}function $t(t,e,n){return 0===t.h&&(Tt(e,n,K(t.g)),!0)}function zt(t,e,n){if(2!==t.h)return!1;var r,i=K(t.g),o=(t=t.g).g;if(t.g+=i,X(t),t=t.h,B)(r=R)||(r=R=new TextDecoder("utf-8",{fatal:!1})),r=r.decode(t.subarray(o,o+i));else{i=o+i;for(var s,a,l,u=[],h=null;o<i;)128>(s=t[o++])?u.push(s):224>s?o>=i?u.push(65533):(a=t[o++],194>s||128!=(192&a)?(o--,u.push(65533)):u.push((31&s)<<6|63&a)):240>s?o>=i-1?u.push(65533):128!=(192&(a=t[o++]))||224===s&&160>a||237===s&&160<=a||128!=(192&(r=t[o++]))?(o--,u.push(65533)):u.push((15&s)<<12|(63&a)<<6|63&r):244>=s?o>=i-2?u.push(65533):128!=(192&(a=t[o++]))||0!=a-144+(s<<28)>>30||128!=(192&(r=t[o++]))||128!=(192&(l=t[o++]))?(o--,u.push(65533)):(s=(7&s)<<18|(63&a)<<12|(63&r)<<6|63&l,s-=65536,u.push(55296+(s>>10&1023),56320+(1023&s))):u.push(65533),8192<=u.length&&(h=k(h,u),u.length=0);r=k(h,u)}return Tt(e,n,r),!0}function Ht(t,e,n,r,i){if(2!==t.h)return!1;var o=new r,s=t.g.i,a=K(t.g),l=t.g.g+a;if(t.g.i=l,i(o,t),0!=(i=l-t.g.g))throw Error("Message parsing ended unexpectedly. Expected to read "+a+" bytes, instead read "+(a-i)+" bytes, either the data ended unexpectedly or the message misreported its own length");return t.g.g=l,t.g.i=s,Ot(e,n,o,r,void 0),!0}function qt(t){vt.call(this,t)}function Wt(t,e){var n=Mt(t,1);if(null!=n&&null!=n){tt(e.g,8);var r=e.g;if(0<=n)tt(r,n);else{for(var i=0;9>i;i++)Q(r,127&n|128),n>>=7;Q(r,1)}}Lt(e,t,2),null!=(r=Mt(t,3))&&lt(e,3,F(r)),null!=(r=Mt(t,4))&&lt(e,4,F(r)),Bt(t,e)}function Vt(t,e){return Ft(t,e,bt||(bt={1:$t,2:Dt,3:zt,4:zt}))}function Gt(t){vt.call(this,t,-1,Yt)}function Jt(t,e){return Ft(t,e,xt||(xt={1:[Ht,qt,Vt]}))}vt.prototype.toJSON=function(){return wt(kt(this),mt)},vt.prototype.toString=function(){return kt(this).toString()},g(qt,vt),g(Gt,vt),Gt.prototype.addClassification=function(t,e){return Ot(this,1,t,qt,e),this};var Xt,Kt,Yt=[1];function Zt(t){vt.call(this,t)}function Qt(t,e){Lt(e,t,1),Lt(e,t,2),Lt(e,t,3),Lt(e,t,4),Lt(e,t,5),Bt(t,e)}function te(t,e){return Ft(t,e,Xt||(Xt={1:Dt,2:Dt,3:Dt,4:Dt,5:Dt}))}function ee(t){vt.call(this,t,-1,ie)}function ne(t,e){return Ft(t,e,Kt||(Kt={1:[Ht,Zt,te]}))}g(Zt,vt),g(ee,vt);var re,ie=[1];function oe(t){vt.call(this,t)}function se(t,e){Lt(e,t,1),Lt(e,t,2),Lt(e,t,3),Lt(e,t,4),Lt(e,t,5);var n=Mt(t,6);if(null!=n&&null!=n){tt(e.g,48);var r=e.g,i=n;n=0>i;var o=(i=Math.abs(i))>>>0;for(i=Math.floor((i-o)/4294967296),i>>>=0,n&&(i=~i>>>0,4294967295<(o=1+(~o>>>0))&&(o=0,4294967295<++i&&(i=0))),n=V=o,o=i;0<o||127<n;)Q(r,127&n|128),n=(n>>>7|o<<25)>>>0,o>>>=7;Q(r,n)}Bt(t,e)}function ae(t,e){return Ft(t,e,re||(re={1:Dt,2:Dt,3:Dt,4:Dt,5:Dt,6:Ut}))}function le(t,e,n){if(n=t.createShader(0===n?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(n,e),t.compileShader(n),!t.getShaderParameter(n,t.COMPILE_STATUS))throw Error("Could not compile WebGL shader.\n\n"+t.getShaderInfoLog(n));return n}function ue(t){return _t(t,qt,1).map((function(t){return{index:Rt(t,1),score:It(t,2),label:null!=Mt(t,3)?Ct(t,3):void 0,displayName:null!=Mt(t,4)?Ct(t,4):void 0}}))}function he(t){return{x:It(t,1),y:It(t,2),z:It(t,3),visibility:null!=Mt(t,4)?It(t,4):void 0}}function ce(t){return t.map((function(t){return _t(Nt(t,ee,ne),Zt,1).map(he)}))}function fe(t,e){this.h=t,this.g=e,this.l=0}function de(t,e,n){return function(t,e){var n=t.g;if(void 0===t.m){var r=le(n,"\n  attribute vec2 aVertex;\n  attribute vec2 aTex;\n  varying vec2 vTex;\n  void main(void) {\n    gl_Position = vec4(aVertex, 0.0, 1.0);\n    vTex = aTex;\n  }",0),i=le(n,"\n  precision mediump float;\n  varying vec2 vTex;\n  uniform sampler2D sampler0;\n  void main(){\n    gl_FragColor = texture2D(sampler0, vTex);\n  }",1),o=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS))throw Error("Could not compile WebGL program.\n\n"+n.getProgramInfoLog(o));r=t.m=o,n.useProgram(r),i=n.getUniformLocation(r,"sampler0"),t.j={I:n.getAttribLocation(r,"aVertex"),H:n.getAttribLocation(r,"aTex"),ca:i},t.s=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.enableVertexAttribArray(t.j.I),n.vertexAttribPointer(t.j.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),t.o=n.createBuffer(),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.enableVertexAttribArray(t.j.H),n.vertexAttribPointer(t.j.H,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.uniform1i(i,0)}r=t.j,n.useProgram(t.m),n.canvas.width=e.width,n.canvas.height=e.height,n.viewport(0,0,e.width,e.height),n.activeTexture(n.TEXTURE0),t.h.bindTexture2d(e.glName),n.enableVertexAttribArray(r.I),n.bindBuffer(n.ARRAY_BUFFER,t.s),n.vertexAttribPointer(r.I,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,t.o),n.vertexAttribPointer(r.H,2,n.FLOAT,!1,0,0),n.bindFramebuffer(n.DRAW_FRAMEBUFFER?n.DRAW_FRAMEBUFFER:n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.colorMask(!0,!0,!0,!0),n.drawArrays(n.TRIANGLE_FAN,0,4),n.disableVertexAttribArray(r.I),n.disableVertexAttribArray(r.H),n.bindBuffer(n.ARRAY_BUFFER,null),t.h.bindTexture2d(0)}(t,e),"function"==typeof t.g.canvas.transferToImageBitmap?Promise.resolve(t.g.canvas.transferToImageBitmap()):n?Promise.resolve(t.g.canvas):"function"==typeof createImageBitmap?createImageBitmap(t.g.canvas):(void 0===t.i&&(t.i=document.createElement("canvas")),new Promise((function(e){t.i.height=t.g.canvas.height,t.i.width=t.g.canvas.width,t.i.getContext("2d",{}).drawImage(t.g.canvas,0,0,t.g.canvas.width,t.g.canvas.height),e(t.i)})))}function ge(t){this.g=t}g(oe,vt);var pe=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function me(t,e){return e+t}function ye(t,e){window[t]=e}function we(t){if(this.g=t,this.listeners={},this.j={},this.F={},this.m={},this.s={},this.G=this.o=this.R=!0,this.C=Promise.resolve(),this.P="",this.B={},this.locateFile=t&&t.locateFile||me,"object"==typeof window)var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else{if("undefined"==typeof location)throw Error("solutions can only be loaded on a web page or in a web worker");e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/"}if(this.S=e,t.options)for(var n=(e=a(Object.keys(t.options))).next();!n.done;n=e.next()){n=n.value;var r=t.options[n].default;void 0!==r&&(this.j[n]="function"==typeof r?r():r)}}function ve(t,e){var n,r;return A((function(i){return e in t.F?i.return(t.F[e]):(n=t.locateFile(e,""),r=fetch(n).then((function(t){return t.arrayBuffer()})),t.F[e]=r,i.return(r))}))}function be(t,e){for(var n=e.name||"$",r=[].concat(l(e.wants)),i=new t.h.StringList,o=a(e.wants),s=o.next();!s.done;s=o.next())i.push_back(s.value);o=t.h.PacketListener.implement({onResults:function(i){for(var o={},s=0;s<e.wants.length;++s)o[r[s]]=i.get(s);var l=t.listeners[n];l&&(t.C=function(t,e,n){var r,i,o,s,l,u,h,c,f,d,g,p,m,y;return A((function(v){switch(v.g){case 1:if(!n)return v.return(e);for(r={},i=0,o=a(Object.keys(n)),s=o.next();!s.done;s=o.next())l=s.value,"string"!=typeof(u=n[l])&&"texture"===u.type&&void 0!==e[u.stream]&&++i;1<i&&(t.G=!1),h=a(Object.keys(n)),s=h.next();case 2:if(s.done){v.g=4;break}if(c=s.value,"string"==typeof(f=n[c]))return m=r,y=c,w(v,function(t,e,n){var r;return A((function(i){return"number"==typeof n||n instanceof Uint8Array||n instanceof t.h.Uint8BlobList?i.return(n):n instanceof t.h.Texture2dDataOut?((r=t.s[e])||(r=new fe(t.h,t.D),t.s[e]=r),i.return(de(r,n,t.G))):i.return(void 0)}))}(t,c,e[f]),14);if(d=e[f.stream],"detection_list"===f.type){if(d){for(var b=d.getRectList(),x=d.getLandmarksList(),E=d.getClassificationsList(),M=[],S=0;S<b.size();++S){var I=Nt(b.get(S),oe,ae);I={T:{X:It(I,1),Y:It(I,2),height:It(I,3),width:It(I,4),rotation:It(I,5,0),W:Rt(I,6)},O:_t(Nt(x.get(S),ee,ne),Zt,1).map(he),M:ue(Nt(E.get(S),Gt,Jt))},M.push(I)}b=M}else b=[];r[c]=b,v.g=7;break}if("proto_list"===f.type){if(d){for(b=Array(d.size()),x=0;x<d.size();x++)b[x]=d.get(x);d.delete()}else b=[];r[c]=b,v.g=7;break}if(void 0===d){v.g=3;break}if("float_list"===f.type){r[c]=d,v.g=7;break}if("proto"===f.type){r[c]=d,v.g=7;break}if("texture"!==f.type)throw Error("Unknown output config type: '"+f.type+"'");return(g=t.s[c])||(g=new fe(t.h,t.D),t.s[c]=g),w(v,de(g,d,t.G),13);case 13:p=v.h,r[c]=p;case 7:f.transform&&r[c]&&(r[c]=f.transform(r[c])),v.g=3;break;case 14:m[y]=v.h;case 3:s=h.next(),v.g=2;break;case 4:return v.return(r)}}))}(t,o,e.outs).then((function(n){n=l(n);for(var i=0;i<e.wants.length;++i){var s=o[r[i]];"object"==typeof s&&s.hasOwnProperty&&s.hasOwnProperty("delete")&&s.delete()}n&&(t.C=n)})))}}),t.i.attachMultiListener(i,o),i.delete()}function xe(t){return void 0===t&&(t=0),1===t?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Ee(t){var e=this;t=t||{},this.g=new we({locateFile:t.locateFile,files:function(t){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:xe(t.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:ce},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:ce},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(t){return t.map((function(t){return ue(Nt(t,Gt,Jt))[0]}))}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(t){var n,r,i;return A((function(o){return 1==o.g?(n=xe(t),r="third_party/mediapipe/modules/hand_landmark/"+n,w(o,ve(e.g,n),2)):(i=o.h,e.g.overrideFile(r,i),o.return(!0))}))}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}(t=we.prototype).close=function(){return this.i&&this.i.delete(),Promise.resolve()},t.reset=function(){var t=this;return A((function(e){t.i&&(t.i.reset(),t.m={},t.s={}),e.g=0}))},t.setOptions=function(t,e){var n=this;if(e=e||this.g.options){for(var r=[],i=[],o={},s=a(Object.keys(t)),l=s.next();!l.done;o={K:o.K,L:o.L},l=s.next()){var u=l.value;u in this.j&&this.j[u]===t[u]||(this.j[u]=t[u],void 0!==(l=e[u])&&(l.onChange&&(o.K=l.onChange,o.L=t[u],r.push(function(t){return function(){return A((function(e){if(1==e.g)return w(e,t.K(t.L),2);!0===e.h&&(n.o=!0),e.g=0}))}}(o))),l.graphOptionXref&&(u={valueNumber:1===l.type?t[u]:0,valueBoolean:0===l.type&&t[u],valueString:2===l.type?t[u]:""},l=Object.assign(Object.assign(Object.assign({},{calculatorName:"",calculatorIndex:0}),l.graphOptionXref),u),i.push(l))))}0===r.length&&0===i.length||(this.o=!0,this.A=(void 0===this.A?[]:this.A).concat(i),this.v=(void 0===this.v?[]:this.v).concat(r))}},t.initialize=function(){var t=this;return A((function(e){return 1==e.g?w(e,function(t){var e,n,r,i,o,s,a,u,h,c,f;return A((function(d){switch(d.g){case 1:return t.R?(e=void 0===t.g.files?[]:"function"==typeof t.g.files?t.g.files(t.j):t.g.files,w(d,A((function(t){switch(t.g){case 1:return t.m=2,w(t,WebAssembly.instantiate(pe),4);case 4:t.g=3,t.m=0;break;case 2:return t.m=0,t.j=null,t.return(!1);case 3:return t.return(!0)}})),2)):d.return();case 2:if(n=d.h,"object"==typeof window)return ye("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),ye("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),s=e.filter((function(t){return void 0!==t.data})),a=e.filter((function(t){return void 0===t.data})),u=Promise.all(s.map((function(e){var n=ve(t,e.url);if(void 0!==e.path){var r=e.path;n=n.then((function(e){return t.overrideFile(r,e),Promise.resolve(e)}))}return n}))),h=Promise.all(a.map((function(e){return void 0===e.simd||e.simd&&n||!e.simd&&!n?function(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise((function(t){e.addEventListener("load",(function(){t()}),!1),e.addEventListener("error",(function(){t()}),!1),document.body.appendChild(e)}))}(t.locateFile(e.url,t.S)):Promise.resolve()}))).then((function(){var e,n,r;return A((function(i){if(1==i.g)return e=window.createMediapipeSolutionsWasm,n=window.createMediapipeSolutionsPackedAssets,r=t,w(i,e(n),2);r.h=i.h,i.g=0}))})),c=A((function(e){return t.g.graph&&t.g.graph.url?e=w(e,ve(t,t.g.graph.url),0):(e.g=0,e=void 0),e})),w(d,Promise.all([h,u,c]),7);if("function"!=typeof importScripts)throw Error("solutions can only be loaded on a web page or in a web worker");return r=e.filter((function(t){return void 0===t.simd||t.simd&&n||!t.simd&&!n})).map((function(e){return t.locateFile(e.url,t.S)})),importScripts.apply(null,l(r)),i=t,w(d,createMediapipeSolutionsWasm(Module),6);case 6:i.h=d.h,t.l=new OffscreenCanvas(1,1),t.h.canvas=t.l,o=t.h.GL.createContext(t.l,{antialias:!1,alpha:!1,aa:"undefined"!=typeof WebGL2RenderingContext?2:1}),t.h.GL.makeContextCurrent(o),d.g=4;break;case 7:if(t.l=document.createElement("canvas"),!(f=t.l.getContext("webgl2",{}))&&!(f=t.l.getContext("webgl",{})))return alert("Failed to create WebGL canvas context when passing video frame."),d.return();t.D=f,t.h.canvas=t.l,t.h.createContext(t.l,!0,!0,{});case 4:t.i=new t.h.SolutionWasm,t.R=!1,d.g=0}}))}(t),2):3!=e.g?w(e,function(t){var e,n,r,i,o,s,l,u;return A((function(h){if(1==h.g)return t.g.graph&&t.g.graph.url&&t.P===t.g.graph.url?h.return():(t.o=!0,t.g.graph&&t.g.graph.url?(t.P=t.g.graph.url,w(h,ve(t,t.g.graph.url),3)):void(h.g=2));for(2!=h.g&&(e=h.h,t.i.loadGraph(e)),n=a(Object.keys(t.B)),r=n.next();!r.done;r=n.next())i=r.value,t.i.overrideFile(i,t.B[i]);if(t.B={},t.g.listeners)for(o=a(t.g.listeners),s=o.next();!s.done;s=o.next())l=s.value,be(t,l);u=t.j,t.j={},t.setOptions(u),h.g=0}))}(t),3):w(e,function(t){var e,n,r,i,o,s;return A((function(l){switch(l.g){case 1:if(!t.o)return l.return();if(!t.v){l.g=2;break}e=a(t.v),n=e.next();case 3:if(n.done){l.g=5;break}return w(l,(0,n.value)(),4);case 4:n=e.next(),l.g=3;break;case 5:t.v=void 0;case 2:if(t.A){for(r=new t.h.GraphOptionChangeRequestList,i=a(t.A),o=i.next();!o.done;o=i.next())s=o.value,r.push_back(s);t.i.changeOptions(r),r.delete(),t.A=void 0}t.o=!1,l.g=0}}))}(t),0)}))},t.overrideFile=function(t,e){this.i?this.i.overrideFile(t,e):this.B[t]=e},t.clearOverriddenFiles=function(){this.B={},this.i&&this.i.clearOverriddenFiles()},t.send=function(t,e){var n,r,i,o,s,l,u,h,c,f=this;return A((function(d){switch(d.g){case 1:return f.g.inputs?(n=1e3*(null==e?performance.now():e),w(d,f.C,2)):d.return();case 2:return w(d,f.initialize(),3);case 3:for(r=new f.h.PacketDataList,i=a(Object.keys(t)),o=i.next();!o.done;o=i.next())if(s=o.value,l=f.g.inputs[s]){t:{var g=t[s];switch(l.type){case"video":var p=f.m[l.stream];if(p||(p=new fe(f.h,f.D),f.m[l.stream]=p),0===p.l&&(p.l=p.h.createTexture()),"undefined"!=typeof HTMLVideoElement&&g instanceof HTMLVideoElement)var m=g.videoWidth,y=g.videoHeight;else"undefined"!=typeof HTMLImageElement&&g instanceof HTMLImageElement?(m=g.naturalWidth,y=g.naturalHeight):(m=g.width,y=g.height);y={glName:p.l,width:m,height:y},(m=p.g).canvas.width=y.width,m.canvas.height=y.height,m.activeTexture(m.TEXTURE0),p.h.bindTexture2d(p.l),m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,g),p.h.bindTexture2d(0),p=y;break t;case"detections":for((p=f.m[l.stream])||(p=new ge(f.h),f.m[l.stream]=p),p.data||(p.data=new p.g.DetectionListData),p.data.reset(g.length),y=0;y<g.length;++y){m=g[y];var v=p.data,b=v.setBoundingBox,x=y,E=m.T,A=new oe;if(Tt(A,1,E.X),Tt(A,2,E.Y),Tt(A,3,E.height),Tt(A,4,E.width),Tt(A,5,E.rotation),Tt(A,6,E.W),E=jt(A,se),b.call(v,x,E),m.O)for(v=0;v<m.O.length;++v){var M=!!(A=m.O[v]).visibility;x=(b=p.data).addNormalizedLandmark,E=y,A=Object.assign(Object.assign({},A),{visibility:M?A.visibility:0}),Tt(M=new Zt,1,A.x),Tt(M,2,A.y),Tt(M,3,A.z),A.visibility&&Tt(M,4,A.visibility),A=jt(M,Qt),x.call(b,E,A)}if(m.M)for(v=0;v<m.M.length;++v)x=(b=p.data).addClassification,E=y,A=m.M[v],Tt(M=new qt,2,A.score),A.index&&Tt(M,1,A.index),A.label&&Tt(M,3,A.label),A.displayName&&Tt(M,4,A.displayName),A=jt(M,Wt),x.call(b,E,A)}p=p.data;break t;default:p={}}}switch(u=p,h=l.stream,l.type){case"video":r.pushTexture2d(Object.assign(Object.assign({},u),{stream:h,timestamp:n}));break;case"detections":(c=u).stream=h,c.timestamp=n,r.pushDetectionList(c);break;default:throw Error("Unknown input config type: '"+l.type+"'")}}return f.i.send(r),w(d,f.C,4);case 4:r.delete(),d.g=0}}))},t.onResults=function(t,e){this.listeners[e||"$"]=t},I("Solution",we),I("OptionType",{BOOL:0,NUMBER:1,Z:2,0:"BOOL",1:"NUMBER",2:"STRING"}),(t=Ee.prototype).close=function(){return this.g.close(),Promise.resolve()},t.onResults=function(t){this.g.onResults(t)},t.initialize=function(){var t=this;return A((function(e){return w(e,t.g.initialize(),0)}))},t.reset=function(){this.g.reset()},t.send=function(t){var e=this;return A((function(n){return w(n,e.g.send(t),0)}))},t.setOptions=function(t){this.g.setOptions(t)},I("Hands",Ee),I("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),I("VERSION","0.4.1635986972")}).call(i.c);var o={},s=n(4486),a=(n(7760),n(748)),l=n(198),u=n(3687),h=n(5492),c=n(3077),f=(n(5527),n(9166),n(3801),function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)});function d(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(t){o(t)}}function a(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))}function g(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var p=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],m={runtime:"mediapipe",maxHands:2,modelType:"full"},y=function(){function t(t){var e,n=this;e="lite"===(this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new o.Hands({locateFile:function(e,n){return t.solutionPath?t.solutionPath.replace(/\/+$/,"")+"/"+e:n+"/"+e}}),t.modelType)?0:1,this.handsSolution.setOptions({modelComplexity:e,selfieMode:this.selfieMode,maxNumHands:t.maxHands}),this.handsSolution.onResults((function(t){if(n.height=t.image.height,n.width=t.image.width,n.hands=[],null!==t.multiHandLandmarks)for(var e=t.multiHandedness,r=t.multiHandLandmarks,i=t.multiHandWorldLandmarks,o=0;o<e.length;o++)n.hands.push(f({},n.translateOutput(r[o],i[o]),{score:e[o].score,handedness:e[o].label}))}))}return t.prototype.translateOutput=function(t,e){var n=this;return{keypoints:t.map((function(t,e){return{x:t.x*n.width,y:t.y*n.height,score:t.visibility,name:p[e]}})),keypoints3D:e.map((function(t,e){return{x:t.x,y:t.y,z:t.z,score:t.visibility,name:p[e]}}))}},t.prototype.estimateHands=function(t,e){return d(this,void 0,void 0,(function(){return g(this,(function(n){switch(n.label){case 0:return e&&e.flipHorizontal&&e.flipHorizontal!==this.selfieMode&&(this.selfieMode=e.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),[4,this.handsSolution.send({image:t})];case 1:return n.sent(),[2,this.hands]}}))}))},t.prototype.dispose=function(){this.handsSolution.close()},t.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},t.prototype.initialize=function(){return this.handsSolution.initialize()},t}();function w(t){return d(this,void 0,void 0,(function(){var e,n;return g(this,(function(r){switch(r.label){case 0:return e=function(t){if(null==t)return f({},m);var e=f({},t);return e.runtime="mediapipe",null==e.maxHands&&(e.maxHands=m.maxHands),null==e.modelType&&(e.modelType=m.modelType),e}(t),[4,(n=new y(e)).initialize()];case 1:return r.sent(),[2,n]}}))}))}function v(t){return t.width*t.height}function b(t){var e=t.xCenter-t.width/2,n=e+t.width,r=t.yCenter-t.height/2;return{xMin:e,xMax:n,yMin:r,yMax:r+t.height,width:t.width,height:t.height}}function x(t,e){var n=b(t),r=b(e);if(!function(t,e){return!(t.xMax<e.xMin||e.xMax<t.xMin||t.yMax<e.yMin||e.yMax<t.yMin)}(n,r))return 0;var i=v(function(t,e){var n=Math.max(t.xMin,e.xMin),r=Math.min(t.xMax,e.xMax),i=Math.max(t.yMin,e.yMin),o=Math.min(t.yMax,e.yMax);return{xMin:n,xMax:r,yMin:i,yMax:o,width:Math.max(r-n,0),height:Math.max(o-i,0)}}(n,r)),o=v(n)+v(r)-i;return o>0?i/o:0}function E(t){return t instanceof l.T?{height:t.shape[0],width:t.shape[1]}:{height:t.height,width:t.width}}function A(t){return t-2*Math.PI*Math.floor((t+Math.PI)/(2*Math.PI))}function M(t){return t instanceof l.T?t:(0,h.f)(t)}function S(t,e){(0,c.a)(0!==t.width,(function(){return e+" width cannot be 0."})),(0,c.a)(0!==t.height,(function(){return e+" height cannot be 0."}))}function I(t,e,n){var r=e.inputResolution,i=e.keepAspectRatio,o=E(t),s=function(t,e){return e?{xCenter:e.xCenter*t.width,yCenter:e.yCenter*t.height,width:e.width*t.width,height:e.height*t.height,rotation:e.rotation}:{xCenter:.5*t.width,yCenter:.5*t.height,width:t.width,height:t.height,rotation:0}}(o,n),h=function(t,e,n){if(void 0===n&&(n=!1),!n)return{top:0,left:0,right:0,bottom:0};var r=e.height,i=e.width;S(e,"targetSize"),S(t,"roi");var o,s,a=r/i,l=t.height/t.width,u=0,h=0;return a>l?(o=t.width,s=t.width*a,h=(1-l/a)/2):(o=t.height/a,s=t.height,u=(1-a/l)/2),t.width=o,t.height=s,{top:h,left:u,right:u,bottom:h}}(s,r,i);return{imageTensor:(0,u.t)((function(){var e=M(t),n=(0,a.a)(function(t,e,n,r){S(r,"inputResolution");var i=1/e.width,o=1/e.height,s=t.xCenter,a=t.yCenter,l=Math.cos(t.rotation),u=Math.sin(t.rotation),h=t.width,c=t.height;return[1/r.width*h*l*1*i*e.width,1/r.height*-c*u*i*e.width,(-.5*h*l*1+.5*c*u+s)*i*e.width,1/r.width*h*u*1*o*e.height,1/r.height*c*l*o*e.height,(-.5*c*l-.5*h*u*1+a)*o*e.height,0,0]}(s,o,0,r),[1,8]);return a.i.transform((0,a.e)((0,l.c)(e,"float32")),n,"bilinear","nearest",0,[r.height,r.width])})),padding:h}}function T(t,e,n,r){return 1===r?.5*(t+e):t+(e-t)*n/(r-1)}function _(t,e,n,r){return d(this,void 0,void 0,(function(){var i,o,s,l,h;return g(this,(function(c){switch(c.label){case 0:return t.sort((function(t,e){return Math.max.apply(Math,e.score)-Math.max.apply(Math,t.score)})),i=(0,a.a)(t.map((function(t){return[t.locationData.relativeBoundingBox.yMin,t.locationData.relativeBoundingBox.xMin,t.locationData.relativeBoundingBox.yMax,t.locationData.relativeBoundingBox.xMax]}))),o=(0,a.t)(t.map((function(t){return t.score[0]}))),[4,a.i.nonMaxSuppressionAsync(i,o,e,n,r)];case 1:return[4,(s=c.sent()).array()];case 2:return l=c.sent(),h=t.filter((function(t,e){return l.indexOf(e)>-1})),(0,u.d)([i,o,s]),[2,h]}}))}))}function O(t,e){return t.map((function(t){var n=f({},t,{x:t.x*e.width,y:t.y*e.height});return null!=t.z&&(n.z=t.z*e.width),n}))}function k(t,e){var n=function(t,e,n,r){var i=(r-n)/255;return{scale:i,offset:n-0*i}}(0,0,e[0],e[1]);return(0,u.t)((function(){return(0,a.b)((0,l.m)(t,n.scale),n.offset)}))}function R(t,e,n){return d(this,void 0,void 0,(function(){var r,i,o,s,h;return g(this,(function(c){switch(c.label){case 0:return r=t[0],i=t[1],o=function(t,e,n){return(0,u.t)((function(){var r,i,o,s;n.reverseOutputOrder?(i=(0,a.s)((0,a.c)(t,[0,n.boxCoordOffset+0],[-1,1])),r=(0,a.s)((0,a.c)(t,[0,n.boxCoordOffset+1],[-1,1])),s=(0,a.s)((0,a.c)(t,[0,n.boxCoordOffset+2],[-1,1])),o=(0,a.s)((0,a.c)(t,[0,n.boxCoordOffset+3],[-1,1]))):(r=(0,a.s)((0,a.c)(t,[0,n.boxCoordOffset+0],[-1,1])),i=(0,a.s)((0,a.c)(t,[0,n.boxCoordOffset+1],[-1,1])),o=(0,a.s)((0,a.c)(t,[0,n.boxCoordOffset+2],[-1,1])),s=(0,a.s)((0,a.c)(t,[0,n.boxCoordOffset+3],[-1,1]))),i=(0,a.b)((0,l.m)((0,a.d)(i,n.xScale),e.w),e.x),r=(0,a.b)((0,l.m)((0,a.d)(r,n.yScale),e.h),e.y),n.applyExponentialOnBoxSize?(o=(0,l.m)((0,a.f)((0,a.d)(o,n.hScale)),e.h),s=(0,l.m)((0,a.f)((0,a.d)(s,n.wScale)),e.w)):(o=(0,l.m)((0,a.d)(o,n.hScale),e.h),s=(0,l.m)((0,a.d)(s,n.wScale),e.h));var u=(0,a.g)(r,(0,a.d)(o,2)),h=(0,a.g)(i,(0,a.d)(s,2)),c=(0,a.b)(r,(0,a.d)(o,2)),f=(0,a.b)(i,(0,a.d)(s,2)),d=(0,a.h)([(0,l.r)(u,[n.numBoxes,1]),(0,l.r)(h,[n.numBoxes,1]),(0,l.r)(c,[n.numBoxes,1]),(0,l.r)(f,[n.numBoxes,1])],1);if(n.numKeypoints)for(var g=0;g<n.numKeypoints;++g){var p=n.keypointCoordOffset+g*n.numValuesPerKeypoint,m=void 0,y=void 0;n.reverseOutputOrder?(m=(0,a.s)((0,a.c)(t,[0,p],[-1,1])),y=(0,a.s)((0,a.c)(t,[0,p+1],[-1,1]))):(y=(0,a.s)((0,a.c)(t,[0,p],[-1,1])),m=(0,a.s)((0,a.c)(t,[0,p+1],[-1,1])));var w=(0,a.b)((0,l.m)((0,a.d)(m,n.xScale),e.w),e.x),v=(0,a.b)((0,l.m)((0,a.d)(y,n.yScale),e.h),e.y);d=(0,a.h)([d,(0,l.r)(w,[n.numBoxes,1]),(0,l.r)(v,[n.numBoxes,1])],1)}return d}))}(i,e,n),s=(0,u.t)((function(){var t=r;return n.sigmoidScore?(null!=n.scoreClippingThresh&&(t=(0,a.j)(r,-n.scoreClippingThresh,n.scoreClippingThresh)),t=(0,l.s)(t)):t})),[4,C(o,s,n)];case 1:return h=c.sent(),(0,u.d)([o,s]),[2,h]}}))}))}function C(t,e,n){return d(this,void 0,void 0,(function(){var r,i,o,s,a,l,u,h,c,f,d,p;return g(this,(function(g){switch(g.label){case 0:return r=[],[4,t.data()];case 1:return i=g.sent(),[4,e.data()];case 2:for(o=g.sent(),s=0;s<n.numBoxes;++s)if(!(null!=n.minScoreThresh&&o[s]<n.minScoreThresh||(a=s*n.numCoords,l=B(i[a+0],i[a+1],i[a+2],i[a+3],o[s],n.flipVertically,s),(u=l.locationData.relativeBoundingBox).width<0||u.height<0))){if(n.numKeypoints>0)for((h=l.locationData).relativeKeypoints=[],c=n.numKeypoints*n.numValuesPerKeypoint,f=0;f<c;f+=n.numValuesPerKeypoint)d=a+n.keypointCoordOffset+f,p={x:i[d+0],y:n.flipVertically?1-i[d+1]:i[d+1]},h.relativeKeypoints.push(p);r.push(l)}return[2,r]}}))}))}function B(t,e,n,r,i,o,s){return{score:[i],ind:s,locationData:{relativeBoundingBox:{xMin:e,yMin:o?1-n:t,xMax:r,yMax:o?1-t:n,width:r-e,height:n-t}}}}function P(t,e){return"none"===t?e:function(t){return 1/(1+Math.exp(-t))}(e)}function F(t,e,n,r){return d(this,void 0,void 0,(function(){var i,o,s,a,l,u,h,c;return g(this,(function(f){switch(f.label){case 0:return n=n||e.flipHorizontally||!1,r=r||e.flipVertically||!1,i=t.size,o=i/e.numLandmarks,[4,t.data()];case 1:for(s=f.sent(),a=[],l=0;l<e.numLandmarks;++l)u=l*o,(c={x:0,y:0}).x=n?e.inputImageWidth-s[u]:s[u],o>1&&(c.y=r?e.inputImageHeight-s[u+1]:s[u+1]),o>2&&(c.z=s[u+2]),o>3&&(c.score=P(e.visibilityActivation,s[u+3])),a.push(c);for(h=0;h<a.length;++h)(c=a[h]).x=c.x/e.inputImageWidth,c.y=c.y/e.inputImageHeight,c.z=c.z/e.inputImageWidth/(e.normalizeZ||1);return[2,a]}}))}))}function j(t,e,n){var r=t.width,i=t.height,o=t.rotation;if(null==n.rotation&&null==n.rotationDegree||(o=function(t,e){return null!=e.rotation?t+=e.rotation:null!=e.rotationDegree&&(t+=Math.PI*e.rotationDegree/180),A(t)}(o,n)),0===o)t.xCenter=t.xCenter+r*n.shiftX,t.yCenter=t.yCenter+i*n.shiftY;else{var s=(e.width*r*n.shiftX*Math.cos(o)-e.height*i*n.shiftY*Math.sin(o))/e.width,a=(e.width*r*n.shiftX*Math.sin(o)+e.height*i*n.shiftY*Math.cos(o))/e.height;t.xCenter=t.xCenter+s,t.yCenter=t.yCenter+a}if(n.squareLong){var l=Math.max(r*e.width,i*e.height);r=l/e.width,i=l/e.height}else if(n.squareShort){var u=Math.min(r*e.width,i*e.height);r=u/e.width,i=u/e.height}return t.width=r*n.scaleX,t.height=i*n.scaleY,t}var N,L={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},D={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},U={flipHorizontal:!1,staticImageMode:!1},$={applyExponentialOnBoxSize:!1,flipVertically:!1,ignoreClasses:[],numClasses:1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},z={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},H={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},q={inputResolution:{width:192,height:192},keepAspectRatio:!0},W={inputResolution:{width:224,height:224},keepAspectRatio:!0},V={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},G={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},J=function(){function t(t,e,n){this.detectorModel=t,this.landmarkModel=e,this.maxHands=n,this.prevHandRectsFromLandmarks=null,this.anchors=function(t){for(var e=[],n=0;n<t.numLayers;){for(var r=[],i=[],o=[],s=[],a=n;a<t.strides.length&&t.strides[a]===t.strides[n];){var l=T(t.minScale,t.maxScale,a,t.strides.length);if(0===a&&t.reduceBoxesInLowestLayer)o.push(1),o.push(2),o.push(.5),s.push(.1),s.push(l),s.push(l);else{for(var u=0;u<t.aspectRatios.length;++u)o.push(t.aspectRatios[u]),s.push(l);if(t.interpolatedScaleAspectRatio>0){var h=a===t.strides.length-1?1:T(t.minScale,t.maxScale,a+1,t.strides.length);s.push(Math.sqrt(l*h)),o.push(t.interpolatedScaleAspectRatio)}}a++}for(var c=0;c<o.length;++c){var f=Math.sqrt(o[c]);r.push(s[c]/f),i.push(s[c]*f)}var d=0,g=0;if(t.featureMapHeight.length>0)d=t.featureMapHeight[n],g=t.featureMapWidth[n];else{var p=t.strides[n];d=Math.ceil(t.inputSizeHeight/p),g=Math.ceil(t.inputSizeWidth/p)}for(var m=0;m<d;++m)for(var y=0;y<g;++y)for(var w=0;w<r.length;++w){var v={xCenter:(y+t.anchorOffsetX)/g,yCenter:(m+t.anchorOffsetY)/d,width:0,height:0};t.fixedAnchorSize?(v.width=1,v.height=1):(v.width=i[w],v.height=r[w]),e.push(v)}n=a}return e}(L);var r=(0,a.t)(this.anchors.map((function(t){return t.width}))),i=(0,a.t)(this.anchors.map((function(t){return t.height}))),o=(0,a.t)(this.anchors.map((function(t){return t.xCenter}))),s=(0,a.t)(this.anchors.map((function(t){return t.yCenter})));this.anchorTensor={x:o,y:s,w:r,h:i}}return t.prototype.estimateHands=function(t,e){return d(this,void 0,void 0,(function(){var n,r,i,o,s,h,c,d,m,y,w,v,b,A,S,I,T,_,k=this;return g(this,(function(g){switch(g.label){case 0:return n=function(t){if(null==t)return f({},U);var e=f({},t);return null==e.flipHorizontal&&(e.flipHorizontal=U.flipHorizontal),null==e.staticImageMode&&(e.staticImageMode=U.staticImageMode),e}(e),null==t?(this.reset(),[2,[]]):(r=E(t),i=(0,u.t)((function(){var e=(0,l.c)(M(t),"float32");return n.flipHorizontal&&(e=(0,a.s)(a.i.flipLeftRight((0,a.e)(e,0)),[0])),e})),o=this.prevHandRectsFromLandmarks,n.staticImageMode||null==o||o.length<this.maxHands?[4,this.detectPalm(i)]:[3,2]);case 1:return 0===(h=g.sent()).length?(this.reset(),i.dispose(),[2,[]]):(c=h.map((function(t){return k.palmDetectionToRoi(t,r)})),s=c,[3,3]);case 2:s=o,g.label=3;case 3:return R=[],[s].forEach((function(t){return t.forEach((function(t){(R=R.filter((function(e){return x(t,e)<=.5}))).push(t)}))})),s=R,[4,Promise.all(s.map((function(t){return k.handLandmarks(t,i)})))];case 4:for(d=g.sent(),m=[],this.prevHandRectsFromLandmarks=[],y=0,w=d;y<w.length;y++)null!=(v=w[y])&&(b=v.landmarks,A=v.worldLandmarks,S=v.handScore,I=v.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(b,r)),null!=(T=O(b,r))&&T.forEach((function(t,e){delete t.z,t.name=p[e]})),null!=(_=A)&&_.forEach((function(t,e){t.name=p[e]})),m.push({keypoints:T,keypoints3D:_,handedness:I,score:S}));return i.dispose(),[2,m]}var R}))}))},t.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),(0,u.d)([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},t.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},t.prototype.detectPalm=function(t){return d(this,void 0,void 0,(function(){var e,n,r,i,o,s,l,h,c,f;return g(this,(function(d){switch(d.label){case 0:return e=I(t,q),n=e.imageTensor,r=e.padding,i=k(n,[0,1]),o=function(t,e){return(0,u.t)((function(){var n=function(t){return(0,u.t)((function(){return[(0,a.c)(t,[0,0,0],[1,-1,1]),(0,a.c)(t,[0,0,1],[1,-1,-1])]}))}(e.predict(t)),r=n[0],i=n[1];return{boxes:(0,a.s)(i),logits:(0,a.s)(r)}}))}(i,this.detectorModel),s=o.boxes,[4,R([l=o.logits,s],this.anchorTensor,$)];case 1:return 0===(h=d.sent()).length?((0,u.d)([n,i,l,s]),[2,h]):[4,_(h,this.maxHands,.3,-1)];case 2:return c=d.sent(),f=function(t,e){void 0===t&&(t=[]);for(var n=e.left,r=e.top,i=e.left+e.right,o=e.top+e.bottom,s=0;s<t.length;s++){var a=t[s],l=a.locationData.relativeBoundingBox,u=(l.xMin-n)/(1-i),h=(l.yMin-r)/(1-o),c=l.width/(1-i),f=l.height/(1-o);l.xMin=u,l.yMin=h,l.width=c,l.height=f;for(var d=0;d<a.locationData.relativeKeypoints.length;++d){var g=a.locationData.relativeKeypoints[d],p=(g.x-n)/(1-i),m=(g.y-r)/(1-o);g.x=p,g.y=m}}return t}(c,r),(0,u.d)([n,i,l,s]),[2,f]}}))}))},t.prototype.palmDetectionToRoi=function(t,e){return j(function(t,e,n){var r=t.locationData.relativeBoundingBox,i=function(t,e,n){var r,i=t.locationData,o=n.rotationVectorStartKeypointIndex,s=n.rotationVectorEndKeypointIndex;r=n.rotationVectorTargetAngle?n.rotationVectorTargetAngle:Math.PI*n.rotationVectorTargetAngleDegree/180;var a=i.relativeKeypoints[o].x*e.width,l=i.relativeKeypoints[o].y*e.height,u=i.relativeKeypoints[s].x*e.width,h=i.relativeKeypoints[s].y*e.height;return A(r-Math.atan2(-(h-l),u-a))}(t,e,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90});return{xCenter:r.xMin+r.width/2,yCenter:r.yMin+r.height/2,width:r.width,height:r.height,rotation:i}}(t,e),e,z)},t.prototype.handLandmarks=function(t,e){return d(this,void 0,void 0,(function(){var n,r,i,o,s,a,l,h,c,d,p,m,y,w,v,b,x;return g(this,(function(g){switch(g.label){case 0:return n=I(e,W,t),r=n.imageTensor,i=n.padding,o=k(r,[0,1]),s=this.landmarkModel.execute(o,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),a=s[0],l=s[1],h=s[2],c=s[3],[4,l.data()];case 1:return(d=g.sent()[0])<.5?((0,u.d)(s),(0,u.d)([r,o]),[2,null]):[4,h.data()];case 2:return p=g.sent()[0],m=p>=.5?"Left":"Right",[4,F(a,V)];case 3:return y=g.sent(),[4,F(c,G)];case 4:return w=g.sent(),v=function(t,e){var n=e.left,r=e.top,i=e.left+e.right,o=e.top+e.bottom;return t.map((function(t){return f({},t,{x:(t.x-n)/(1-i),y:(t.y-r)/(1-o),z:t.z/(1-i)})}))}(y,i),b=function(t,e,n){void 0===n&&(n={ignoreRotation:!1});for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.x-.5,l=s.y-.5,u=n.ignoreRotation?0:e.rotation,h=Math.cos(u)*a-Math.sin(u)*l,c=Math.sin(u)*a+Math.cos(u)*l;h=h*e.width+e.xCenter,c=c*e.height+e.yCenter;var d=s.z*e.width,g=f({},s);g.x=h,g.y=c,g.z=d,r.push(g)}return r}(v,t),x=function(t,e){for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r],s=o.x,a=o.y,l=e.rotation,u=Math.cos(l)*s-Math.sin(l)*a,h=Math.sin(l)*s+Math.cos(l)*a,c=f({},o);c.x=u,c.y=h,n.push(c)}return n}(w,t),(0,u.d)(s),(0,u.d)([r,o]),[2,{landmarks:b,worldLandmarks:x,handScore:d,handedness:m}]}}))}))},t.prototype.handLandmarksToRoi=function(t,e){return j(function(t,e){for(var n=function(t,e){var n=t[0].x*e.width,r=t[0].y*e.height,i=(t[4].x+t[8].x)/2,o=(t[4].y+t[8].y)/2;return i=(i+t[6].x)/2*e.width,o=(o+t[6].y)/2*e.height,A(Math.PI/2-Math.atan2(-(o-r),i-n))}(t,e),r=A(-n),i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,u=t;l<u.length;l++){var h=(m=u[l]).x,c=m.y;i=Math.min(i,h),o=Math.max(o,h),s=Math.min(s,c),a=Math.max(a,c)}var f=(o+i)/2,d=(a+s)/2;i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY;for(var g=0,p=t;g<p.length;g++){var m,y=((m=p[g]).x-f)*e.width,w=(m.y-d)*e.height,v=y*Math.cos(r)-w*Math.sin(r),b=y*Math.sin(r)+w*Math.cos(r);i=Math.min(i,v),o=Math.max(o,v),s=Math.min(s,b),a=Math.max(a,b)}var x=(o+i)/2,E=(a+s)/2,M=x*Math.cos(n)-E*Math.sin(n)+e.width*f,S=x*Math.sin(n)+E*Math.cos(n)+e.height*d,I=(o-i)/e.width,T=(a-s)/e.height;return{xCenter:M/e.width,yCenter:S/e.height,width:I,height:T,rotation:n}}([].concat(t.slice(0,4),t.slice(5,7),t.slice(9,11),t.slice(13,15),t.slice(17,19)),e),e,H)},t}();function X(t){return d(this,void 0,void 0,(function(){var e,n,r,i,o,a;return g(this,(function(l){switch(l.label){case 0:return e=function(t){if(null==t)return f({},D);var e=f({},t);if(e.runtime="tfjs",null==e.maxHands&&(e.maxHands=D.maxHands),null==e.modelType&&(e.modelType=D.modelType),"lite"!==e.modelType&&"full"!==e.modelType)throw new Error("Model type must be one of lite or full, but got "+e.modelType);return null==e.detectorModelUrl&&("lite"===e.modelType?e.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1":e.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"),null==e.landmarkModelUrl&&("lite"===e.modelType?e.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1":e.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"),e}(t),n=e.detectorModelUrl.indexOf("https://tfhub.dev")>-1,r=e.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([(0,s.l)(e.detectorModelUrl,{fromTFHub:n}),(0,s.l)(e.landmarkModelUrl,{fromTFHub:r})])];case 1:return i=l.sent(),o=i[0],a=i[1],[2,new J(o,a,e.maxHands)]}}))}))}(N||(N={})).MediaPipeHands="MediaPipeHands";var K=n(1260);let Y;const Z=640;let Q,tt,et=["red","white"];const nt=t=>(500-t)/500;!async function(){await r.CQI("webgl");let t=N.MediaPipeHands;const e=await function(t,e){return d(this,void 0,void 0,(function(){var n,r;return g(this,(function(i){if(t===N.MediaPipeHands){if(r=void 0,null!=(n=e)){if("tfjs"===n.runtime)return[2,X(n)];if("mediapipe"===n.runtime)return[2,w(n)];r=n.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+r)}throw new Error(t+" is not a supported model name.")}))}))}(t,{runtime:"tfjs",modelType:"lite"});let n;try{n=await async function(){const t=await async function(){if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Browser API navigator.mediaDevices.getUserMedia not available");const t=document.getElementById("video"),e=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}});return t.srcObject=e,new Promise((e=>{t.onloadedmetadata=()=>{e(t)}}))}();return t.play(),t}()}catch(t){throw document.getElementById("info").style.display="block",t}n.width=n.videoWidth,n.height=n.videoHeight,Q=document.getElementById("canvas"),Q.height=n.videoHeight,Q.width=n.videoWidth,tt=Q.getContext("2d");const i=Array(2),o=Array(2),s=Array(2),a=Array(2);for(const t of[0,1])if(i[t]=new K.S9(0).toDestination(),a[t]=new K.fL(0).connect(i[t]),1===t)o[t]=(new K.nu).connect(a[t]).start(),s[t]=new K.MZ({value:440,units:"hertz"}).connect(o[t].frequency);else{const e=new K.lW("https://raw.githubusercontent.com/bpatmiller/theremin/master/grain.wav",(()=>{console.log("buffer loaded"),o[t]=new K.pw(e),o[t].loop=!0,o[t].loopEnd=1,o[t].connect(a[t]).start(),s[t]=new K.MZ({value:440,units:"hertz"})}))}(async(t,e,n,r,i,o)=>{!async function s(){const a=await e.estimateHands(t);if(tt=Q.getContext("2d"),tt.clearRect(0,0,Q.width,Q.height),a.length>0){(0,K.zO)();for(const t in a){const e=parseInt(t),s=a[e].keypoints,u=s[0].x,h=s[0].y;if(u&&h){const t=(0,c.n)(-1,(Z-s[0].x)/Z*2-1,1);let a=(l=u,Math.max(1e4*(Z-l)/Z,0)**.5);0==e?(o[e].grainSize=(0,c.n)(.05,.3*(1.2-t),2),o[e].detune=120*t,o[e].playbackRate=(0,c.n)(.5,.5+4*(1.1-t),10),n[e].gain.rampTo(4*nt(s[0].y),.1)):(r[e].rampTo(a,.05),n[e].gain.rampTo(.1*nt(s[0].y),.1)),i[e].pan.rampTo(t)}}for(const t in a)for(const e of Array(20).keys()){tt.strokeStyle=et[parseInt(t)%2],tt.beginPath();const n=a[t].keypoints[e],r=a[t].keypoints[e+1];tt.moveTo(n.x,n.y),tt.lineTo(r.x,r.y),tt.stroke()}}else{tt=Q.getContext("2d"),tt.clearRect(0,0,Q.width,Q.height);for(const t of n)t?.gain.rampTo(0,.25)}var l;Y=requestAnimationFrame(s)}()})(n,e,i,s,a,o)}()}},t=>{t.O(0,[675,715,521,764,589,928,955,143],(()=>(765,t(t.s=765)))),t.O()}]);